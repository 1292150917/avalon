<!DOCTYPE html>
<html>

<head>
  <title>TODO supply a title</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <script src="../dist/avalon.js"></script>

  <script>
            var div = document.createElement('div')
            var body = document.body
            body.appendChild(div)
            function heredoc(fn) {
                return fn.toString().replace(/^[^\/]+\/\*!?\s?/, '').
                     replace(/\*\/[^\/]+$/, '').trim().replace(/>\s*</g, '><')
            }
            function fireClick(el) {
                if (el.click) {
                    el.click()
                } else {
            //https://developer.mozilla.org/samples/domref/dispatchEvent.html
                    var evt = document.createEvent('MouseEvents')
                    evt.initMouseEvent('click', true, true, window,
                            0, 0, 0, 0, 0, false, false, false, false, 0, null);
                    !el.dispatchEvent(evt);
                }
            }
            function expect(a){
                return {
                    to: {
                        equal:function(b){
                          console.log(a,b,a===b)
                        }
                    }
                }
            }
            //  
         div.innerHTML = heredoc(function () {
            /*
            <div ms-controller="html2">
            <p><input ms-duplex="@a" />{{@a}}<strong ms-text="@a"></strong></p>
            <p><input ms-duplex="@b" /><span>{{@b}}</span><em ms-html="@b"></em></p>
            </div>
             */
        })
        vm = avalon.define({
            $id: 'html2',
            a: 111,
            b: 22222
        })
        avalon.scan(div)
        var el = div.getElementsByTagName('p')
        var prop = 'textContent' in div ? 'textContent': 'innerText'
        expect(el[0][prop]).to.equal('111111')
       // expect(el[1][prop]).to.equal('222222')
       //  vm.b = '333'
        setTimeout(function () {
        //    expect(el[1][prop]).to.equal('333333')
            //done()
        })
        </script>
</body>

</html>