<!DOCTYPE HTML>
<html>
    <head>
        <title>ms-repeat</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
        <script src="avalon.js" ></script>
        <script>
            var a = avalon.define("test", function(vm) {
                vm.aaa = 111111111
                vm.lastName = "lastName"
                vm.firstName = "firstName"
                vm.ddd = "input"
                vm.array = [1, 2, 3, 4, 5, 6, 7]
                vm.notify = function(a) {
                    avalon.log(a + "-----------")
                }
                vm.object = {
                    aaa: 1,
                    bbb: 2,
                    ccc: 3
                }
                vm.fullName = {//一个包含set或get的对象会被当成PropertyDescriptor，
                    set: function(val) {//里面必须用this指向scope，不能使用scope
                        var array = (val || "").split(" ");
                        this.firstName = array[0] || "";
                        this.lastName = array[1] || "";
                    },
                    get: function() {
                        return this.firstName + " " + this.lastName;
                    }
                }
                vm.fn = function() {
                    vm.object = {
                       bbb:333,
                       rrr:555,
                       444:777
                    }
                    setTimeout(function(){
                        vm.object.rrr = "++++++++++++++"
                    },2500)
                }

                vm.$watch("aaa", function() {
                    avalon.log("=================")
                })
            })


            setTimeout(function() {
                console.log("更新")
                a.ddd = "新值"
                a.fullName = "newValue 54545"
                a.array.push(88)
                a.object.aaa = 9
//                a.object = {
//                    xxx: "iiii",
//                    yyy: "jjjj",
//                    zzz: "kkkk"
//                }
            }, 2000)
            
            avalon.ready(function(){
                var el = document.getElementById("aa")
                avalon(el).addClass("ddd erew sdfdsf sddfdfd")
            })

        </script>
    </head>
    <body ms-controller="test" id="aa">
        <div>{{fullName}}</div><!--
           <input ms-duplex="ddd"/>
           {{ddd}} {{lastName}}
           <ul><li ms-repeat="array">{{el}}</li></ul>-->
        <div ms-repeat="object" ms-click="notify($key)">
            这是循环体<p>{{$val}}</p>
        </div>
        <button type="button" ms-click="fn">cccc</button>
    </body>
</html>