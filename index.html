<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title></title>
        <script type="text/javascript" src="avalon.js"></script>
        <script type="text/javascript">
            /*有bug，先focus，再blur，再重新focus，$watch监控丢失*/
            var vm = avalon.define({
                $id: "test",
                str: "",
                focus: function () {
                    vm.$watch();
                    vm.$watch("str", function (newVal, oldVal) {
                        if (newVal.length > 3) {
                            vm.str = oldVal;
                        }
                    });
                },
                blur: function () {
                    vm.$unwatch("str");
                }
            });
        </script>
    </head>
    <body>
        <div ms-controller="test">
            <p>先在这里输入文字</p>
            <p><input type="text" ms-duplex-string="str" ms-on-focus="focus" ms-on-blur="blur"/>{{str}}</p>
            <p><input value="然后点这里失去焦点"></p>
        </div>
    </body>
</html>