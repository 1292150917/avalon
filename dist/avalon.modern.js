!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.avalon=t():e.avalon=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var a=n(80);n(25),n(5),n(69),n(52),n(34),n(82),e.exports=a},function(e,t){var n={},a=/([a-z\d])([A-Z]+)/g,r=/[-_][^-_]/g,o=/\d\.\d{4}/,i=/[-.*+?^${}()|[\]\/\\]/g;avalon.mix({caches:{},vmodels:{},filters:{},components:{},directives:{},eventHooks:{},eventListeners:{},cssHooks:n,version:2,css:function(e,t,a,r){e instanceof avalon&&(e=e[0]);var o=avalon.camelize(t);if(t=avalon.cssName(o)||o,void 0===a||"boolean"==typeof a){r=n[o+":get"]||n["@:get"],"background"===t&&(t="backgroundColor");var i=r(e,t);return a===!0?parseFloat(i)||0:i}if(""===a)e.style[t]="";else{if(null==a||a!==a)return;isFinite(a)&&!avalon.cssNumber[o]&&(a+="px"),r=n[o+":set"]||n["@:set"],r(e,t,a)}},directive:function(e,t){return this.directives[e]=t},isObject:function(e){return null!==e&&"object"==typeof e},range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var a=-1,r=Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);++a<r;)o[a]=e,e+=n;return o},hyphen:function(e){return e.replace(a,"$1-$2").toLowerCase()},camelize:function(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(r,function(e){return e.charAt(1).toUpperCase()})},makeHashCode:function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(o,e)},escapeRegExp:function(e){return(e+"").replace(i,"\\$&")},Array:{merge:function(e,t){e.push.apply(e,t)},ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}});var s=1;e.exports={avalon:avalon,getLongID:function(e){return e.uuid||(e.uuid=avalon.makeHashCode("e"))},getShortID:function(e){return e.uuid||(e.uuid="_"+ ++s)}}},function(e,t){function n(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var a=n.prototype;a.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},a.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},a.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e.exports=n},function(e,t){function n(e,t,r){var o=e[0];if(o||r){r=r||o.parentNode;for(var i=0,s=t.length;s>i;i++){var l=t[i],c=o;if(c&&(o=c.nextSibling),"for"===l.directive&&l.change){if(1===c.nodeType){var u=document.createComment(l.nodeValue);r.insertBefore(u,c),r.insertBefore(document.createComment("a-for-end:"),c.nextSibling),c=u}var p=[c],v=c;e:for(;v&&(v=v.nextSibling);)if(p.push(v),0===(v.nodeValue||"").indexOf("a-for-end:")){o=v.nextSibling;break e}l.repeatNodes=p}!1!==a(c,l,r,"change")?(!l.skipContent&&l.children&&c&&1===c.nodeType&&n(avalon.slice(c.childNodes),l.children,c),a(c,l,r,"afterChange")):a(c,l,r,"afterChange")}}}function a(e,t,n,a){var r=t[a];if(r){for(var o;o=r.shift();)if(!1===o(e,t,n))return!1;delete t[a]}}e.exports=n},function(e,t,n){var a=n(2);e.exports=new a(512)},function(e,t,n){var a=n(43),r=n(42),o=n(40),i=n(41);avalon.vdomAdaptor=function(e){switch(e.type){case"#text":return new a(e);case"#comment":return new o(e);case"#component":return new i(e);default:return new r(e)}},e.exports={VText:a,VComment:o,VElement:r,VComponent:i}},function(e,t){e.exports=avalon.oneObject("$id,$render,$element,$watch,$fire,$events,$model,$skipArray,$accessors,$hashcode")},function(e,t,n){function a(e){var t=e.target;avalon(t).addClass(t.getAttribute(l[e.type])||"")}function r(e){var t=e.target,n=l[e.type];avalon(t).removeClass(t.getAttribute(n)||""),"change-active"!==n&&avalon(t).removeClass(t.getAttribute("change-active")||"")}function o(e,t){var n=e.getAttribute("old-change-class")||"",a=t["change-class"];avalon(e).removeClass(n).addClass(a),e.setAttribute("old-change-class",a),delete t["change-class"]}var i=n(1).getLongID,s=avalon.directives;avalon.directive("class",{parse:function(e,t){return"vnode"+t+'.props["'+e.name+'"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t,n){var o=e.props["a-"+n],i=t.props["a-"+n];if(t.classEvent)e.classEvent=t.classEvent;else{var s={};"hover"===n?(s.mouseenter=a,s.mouseleave=r):"active"===n&&(e.props.tabindex=e.props.tabindex||-1,s.tabIndex=e.props.tabindex,s.mousedown=a,s.mouseup=r,s.mouseleave=r),e.classEvent=s}var l;if(Array.isArray(o)?l=o.join(" ").trim().replace(/\s+/," "):"object"==typeof o?l=Object.keys(o).filter(function(e){return o[e]}).join(" "):"string"==typeof o&&(l=o.trim().replace(/\s+/," ")),"string"!=typeof l)return void(e.props["a-"+n]=i);if(!i||i!==l){e["change-"+n]=l;var c=e.change||(e.change=[]);avalon.Array.ensure(c,this.update)}},update:function(e,t){var n=t.classEvent;if(n){for(var a in n)"tabIndex"===a?e[a]=n[a]:avalon.bind(e,a,n[a]);t.classEvent={}}var r=["class","hover","active"];r.forEach(function(n){var a="change-"+n,r=t[a];if(r)if("class"===n)o(e,t);else{var i=e.getAttribute(a);i&&avalon(e).removeClass(i),e.setAttribute(a,r)}})}}),s.active=s.hover=s["class"];var l={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"};i(a),i(r)},function(e,t){avalon.directive("controller",{priority:1,parse:function(e,t){var n="vm"+t,a=/\{.+\}/.test(e.expr),r="\n\n\nvar "+n+" =  avalon.vmodels["+avalon.quote(e.expr)+"]\n",o="\n\n\nvar "+n+" = "+e.expr+"\n",i=(a?o:r)+"if("+n+"){\n	if(__vmodel__){\n		__vmodel__ = avalon.mediatorFactory(__vmodel__, "+n+")\n	}else{\n		__vmodel__ = "+n+"\n	}\n}\n\n\n";return i},diff:avalon.noop,update:avalon.noop})},function(e,t){avalon.directive("css",{parse:function(e,t){return"vnode"+t+'.props["a-css"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-css"],a=t.props["a-css"];if(Object(n)===n){if(Array.isArray(n)&&(n=e.props["a-css"]=avalon.mix.apply({},n)),"object"!=typeof a)e.changeStyle=n;else{var r={},o=!1;for(var i in n)n[i]!==a[i]&&(o=!0,r[i]=n[i]);o&&(e.changeStyle=r)}if(e.changeStyle){var s=e.change||(e.change=[]);avalon.Array.ensure(s,this.update)}}else e.props["a-css"]=a},update:function(e,t){var n=t.changeStyle,a=avalon(e);for(var r in n)a.css(r,n[r]);delete t.changeStyle}})},function(e,t){avalon.directive("expr",{parse:function(){},diff:function(e,t){if(e.nodeValue!==t.nodeValue){var n=e.change||(e.change=[]);avalon.Array.ensure(n,this.update)}},update:function(e,t,n){3!==e.nodeType?n.replaceChild(avalon.vdomAdaptor(t).toDOM(),e):e.nodeValue=t.nodeValue}})},function(e,t,n){function a(e,t){return e.children.forEach(function(e){t.appendChild(avalon.vdomAdaptor(e).toDOM())}),t}function r(e,t){for(var n,a=[],r={children:[]},o=0;n=e[o];o++)"#comment"===n.type&&n.nodeValue===t?(r.children.push(n),r.key=n.key,r.index=a.length,a.push(r),r={children:[]}):r.children.push(n);return a}function o(e,t){for(var n,a=e[t],r=a.signature+":end",o=[];(n=e[t++])&&(o.push(n),n.nodeValue!==r););return o}function i(e,t){for(var n,a=0,r=[];(n=e[t++])&&("#comment"===n.type&&(0===n.nodeValue.indexOf("a-for:")?a++:0===n.nodeValue.indexOf("a-for-end:")&&a--),r.push(n),0!==a););return r}function s(e,t){var n=e[t];if(n){for(var a=[{id:t,c:n}];;){if(t+="_",!e[t])break;a.push({id:t,c:e[t]})}var r=a.pop();return delete e[r.id],r.c}return n}function l(e,t){var n=t.key;if(e[n]){for(;;)if(n+="_",!e[n]){e[n]=t;break}}else e[n]=t}var c=n(3);avalon._each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var a=e[n],r=typeof a,o=a&&"object"===r?e.$hashcode:r+a;t(n,e[n],o)}else for(var n in e)e.hasOwnProperty(n)&&t(n,e[n],n)};var u=/a-for\:\s*/,p=/^\s*\(\s*/,v=/\s*\)\s*$/,f=/\s*,\s*/;avalon.directive("for",{parse:function(e,t){var n=e.replace(u,"").split(" in "),a="var loop"+t+" = "+avalon.parseExpr(n[1])+"\n",r=n[0].replace(p,"").replace(v,"").split(f);return 1===r.length&&r.unshift("$key"),a+"avalon._each(loop"+t+", function("+r+",traceKey){\n\n"},diff:function(e,t,n){var a=e[n],c=t[n]||{},u="directive"in a,p="directive"in c,v=u?o(e,n):i(e,n),f=c.repeatVnodes;f||(f=p?o(t,n):i(t,n));var d=v.length-f.length;if(d>0){for(var h=[n,0],m=0;d>m;m++)h.push(null);t.splice.apply(t,h)}else t.splice.apply(t,[n,Math.abs(d)]);a.action=p?"reorder":"replace",a.repeatVnodes=v;var g=a.components=r(v.slice(1,-1),a.signature);if("reorder"===a.action){for(var y,x={},b={},n=0;y=g[n++];)l(x,y);for(var y,_=c.components,n=0;y=_[n++];){var w=s(x,y.key);w&&(b[y.index]=w.index,avalon.diff(w.children,y.children))}for(var n in x)w=x[n],b[w.index+"_"]=w,avalon.diff(w.children,[]);a.indexes=b}var A=a.change||(a.change=[]);return avalon.Array.ensure(A,this.update),n+v.length-1},update:function(e,t,n){var r=t.repeatVnodes,o=t.repeatNodes,i=t.action,s=o[o.length-1],l=r.slice(1,-1);if("replace"===i){for(var u=e.nextSibling;u!==s;)n.removeChild(u),u=e.nextSibling;var p=document.createDocumentFragment();l.forEach(function(e){p.appendChild(avalon.vdomAdaptor(e).toDOM())});var v=avalon.slice(p.childNodes);avalon.diff(l,[]),n.insertBefore(p,s),c(v,l,n)}else{for(var f,d,h=t.signature,m=t.indexes,g=document.createDocumentFragment(),p=g.cloneNode(!1),y={},x=[],b=0;(f=e.nextSibling)&&f!==s;)f.nodeValue===h?(p.appendChild(f),void 0!==m[b]?(y[m[b]]=p,delete m[b]):x.push(p),b++,p=g.cloneNode(!1)):p.appendChild(f);for(b in m){var _=m[b];b=parseFloat(b),y[b]=a(_,g.cloneNode(!1))}for(b=0,d;d=y[b++];)g.appendChild(d);var v=avalon.slice(g.childNodes);n.insertBefore(g,s),c(v,l,n)}}})},function(e,t,n){var a=n(2),r=new a(128);avalon.textCache=r,avalon.directive("html",{parse:function(e,t){return"vnode"+t+".htmlVm = __vmodel__\nvnode"+t+".props.wid = 1;\nvnode"+t+'.props["a-html"] ='+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-html"],a=t.props["a-html"];if(n!==a){var o=r.get(n);if(!Array.isArray(o)){var i=avalon.lexer(n),s=avalon.render(i);o=s(e.htmlVm),n=e.props["a-html"]=o.map(function(e){return"template"in e?e.template:e.nodeValue}).join("-"),r.put(n,o)}if(e.children=o,e.props["a-html"]!==a){var l=e.change||(e.change=[]);avalon.Array.ensure(l,this.update)}}},update:function(e,t){if(e.querySelectorAll){var n=e.querySelectorAll("[avalon-events]");avalon.each(n,function(e){avalon.unbind(e)})}else{var n=e.getElementsByTagName("*");avalon.each(n,function(e){e.getAttribute("avalon-events")&&avalon.unbind(e)})}if(window.Range)e.innerHTML=t.children.map(function(e){return avalon.vdomAdaptor(e).toHTML()}).join("");else{avalon.clearHTML(e);var a=document.createDocumentFragment();t.children.forEach(function(e){a.appendChild(avalon.vdomAdaptor(e).toDOM())}),e.appendChild(a)}}})},function(e,t,n){var a=n(3);avalon.directive("if",{priority:5,parse:function(e,t){return"vnode"+t+".props['a-if'] = "+avalon.quote(e.expr)+";\n"},diff:function(e,t){if(e.type!==t.type){var n=e.change||(e.change=[]);avalon.Array.ensure(n,this.update)}},update:function(e,t,n){var r=e.nodeName.toLowerCase(),o=t.type;if(r!==o)if(1===e.nodeType)avalon.caches[t.nodeValue]=e,n.replaceChild(avalon.vdomAdaptor(t).toDOM(),e);else{var i=e.signature||e.nodeValue,s=avalon.caches[i];if(s)n.replaceChild(s,e),a([s],[t]);else{var l=avalon.vdomAdaptor(t).toDOM();n.replaceChild(l,e),avalon.caches[i]=l}}}})},function(e,t,n){var a=n(1).getLongID,r=avalon.quote,o=/^a-on-(\w+)/,i=/\|.+/g,s=/([@$]?\w+)/g,l=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g;avalon.directive("on",{priority:3e3,parse:function(e,t){var n=e.expr.replace(l," ").replace(i,"").match(s),o=n.every(function(e){return"@"===e.charAt(0)||"$event"===e}),c="vnode"+t+".onVm = __vmodel__\n",u=r(e.name);if(o){var p=Function("return "+avalon.parseExpr(e,"on"))(),v=a(p);return avalon.eventListeners[v]=p,c+"vnode"+t+".props["+u+"] = avalon.eventListeners."+v+"\n"}return c+"vnode"+t+".props["+u+"] = "+avalon.parseExpr(e,"on")+"\n"},diff:function(e,t,n,r){var i=e.props[r],s=t.props[r];if(i!==s){var l=r.match(o);n=l[1];var c=n+":"+a(i);e.addEvents=e.addEvents||{},e.addEvents[c]=i,"function"==typeof s&&(e.removeEvents=e.removeEvents||{},e.removeEvents[n+":"+s.uuid]=s);var u=e.change||(e.change=[]);avalon.Array.ensure(u,this.update)}},update:function(e,t){var n,a,r;e.__av_context__=t.onVm,delete t.onVm;for(n in t.removeEvents)a=n.split(":").shift(),r=t.removeEvents[n],avalon.unbind(e,a,r);delete t.removeEvents;for(n in t.addEvents)a=n.split(":").shift(),r=t.addEvents[n],avalon.bind(e,a,r);delete t.addEvents}})},function(e,t,n){var a=n(2),r=new a(256),o=avalon.config.rexpr;avalon.directive("text",{parse:function(e,t){return"vnode"+t+".textVm = __vmodel__\nvnode"+t+".props.wid = 2;\nvnode"+t+'.props["a-text"] ='+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-text"],a=t.props["a-text"];if(n!==a){var i=r.get(n);if(!Array.isArray(i)){var s=o.test(n);if(s){var l=[{type:"#text",nodeValue:n}],c=avalon.render(l);i=c(e.textVm),e.props["a-text"]=i[0].nodeValue,r.put(n,i)}else i=[{type:"#text",nodeValue:n}]}if(e.children=i,e.props["a-text"]!==a){var u=e.change||(e.change=[]);avalon.Array.ensure(u,this.update)}}},update:function(e,t){var n=t.props["a-text"];"textContent"in e?e.textContent=n+"":e.innerText=n+""}})},function(e,t){function n(e,t){var a="_"+e;if(!n[a]){var r=document.createElement(e);avalon.root.appendChild(r),t=avalon.modern?getComputedStyle(r,null).display:r.currentStyle.display,avalon.root.removeChild(r),n[a]=t}return n[a]}avalon.parseDisplay=n,avalon.directive("visible",{parse:function(e,t){return"vnode"+t+'.props["a-visible"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-visible"]=!!e.props["a-visible"];if(e.displayValue=t.displayValue,n!==t.props["a-visible"]){var a=e.change||(e.change=[]);avalon.Array.ensure(a,this.update)}},update:function(e,t){if(t.props["a-visible"]){var a=avalon(e).css("display");t.displayValue||(t.displayValue="none"!==a?a:n(e.nodeName)),e.style.display=t.displayValue}else e.style.display="none"}})},function(e,t){var n=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected,","isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),a={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};n.replace(/\w+/g,function(e){a[e.toLowerCase()]=e});var r=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");r.replace(/\w+/g,function(e){a[e.toLowerCase()]=e}),e.exports=a},function(e,t){e.exports={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0}},function(e,t){function n(e){var t=e.getElementsByTagName("script");if(t.length)for(var n,o=0;n=t[o++];)if(r[n.type]){var i=a.cloneNode(!1);Array.prototype.forEach.call(n.attributes,function(e){e&&e.specified&&(i[e.name]=e.value,i.setAttribute(e.name,e.value))}),i.text=n.text,n.parentNode.replaceChild(i,n)}}var a=avalon.document.createElement("script"),r=avalon.oneObject(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);e.exports=n},function(e,t){function n(e){for(var t,a=0;t=e[a++];)if(1===t.nodeType){var r=t.getAttribute("a-controller")||t.getAttribute("ms-controller"),o=avalon.vmodels[r];if(o&&!o.$element){var i=t.outerHTML;avalon(t).removeClass("ms-controller a-controller"),o.$element=t;var s=new Date-0,l=avalon.lexer(i);avalon.log("create primitive vtree",new Date-s),s=new Date,o.$render=avalon.render(l),avalon.log("create template Function ",new Date-s),avalon.rerenderStart=new Date,t.vnode=l,avalon.batch(r,!0)}else r||n(t.childNodes)}}e.exports=avalon.scan=function(e){avalon.warn("[avalon.scan] is inner method that only invokes once!"),e&&e.nodeType&&n([e])}},function(e,t){function n(e,t,n){var a=avalon.type(e);if("array"!==a||"object"!==a)throw"orderBy只能处理对象或数组";var r=n&&0>n?-1:1;if("string"==typeof t){var o=t;t=function(e){return e&&e[o]}}e=l(e),e.forEach(function(e){e.order=t(e.value,e.key)}),e.sort(function(e,t){var n=e.order,a=t.order;return n===a?0:n>a?r:-r});var s="array"===a,c=s?[]:{};return i(c,e,function(e){s?c.push(e.value):c[e.key]=e.value})}function a(e,t){var n=avalon.type(e);if("array"!==n&&"object"!==n)throw"filterBy只能处理对象或数组";var a=avalon.slice(arguments,2);if("function"==typeof t)var r=t;else{if("string"!=typeof t)throw t+"必须是字符串或函数";a.unshift(new RegExp(avalon.escapeRegExp(t),"i")),r=s}e=l(e).filter(function(e){return!!r.apply(e,[e.value].concat(a))});var o="array"===n,c=o?[]:{};return i(c,e,function(e){o?c.push(e.value):c[e.key]=e.value})}function r(e,t){if(avalon.isObject(e)&&!Array.isArray(e)){var n=[];return i(n,t,function(t){n.push(e.hasOwnProperty(t)?e[t]:"")})}throw"selectBy只支持对象"}function o(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):parseInt(t,10),Number.isNaN(t)?e:("number"==typeof e&&(e+=""),Array.isArray(e)||"string"==typeof e?(n=!n||Number.isNaN(n)?0:~~n,n=0>n?Math.max(0,e.length+n):n,e=t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n),i(e,[])):e)}function i(e,t,n){for(var a=0,r=t.length;r>a;a++)n(t[a]);return e}function s(e,t){if(avalon.isPlainObject(e)){for(var n in e)if(t.test(e[n]))return!0}else{if(Array.isArray(e))return e.some(function(e){return t.test(e)});if(null!==e)return t.test(e)}return!1}function l(e){var t=[],n=0;return avalon.each(e,function(e,a){t[n++]={value:a,key:e}}),t}Number.isNaN=Number.isNaN||function(e){return e!==e},e.exports={limitBy:o,orderBy:n,selectBy:r,filterBy:a}},function(e,t){function n(e){return parseInt(e,10)||0}function a(e,t,n){var a="";for(0>e&&(a="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),a+e}function r(e,t,n,r){return function(o){var i=o["get"+e]();return(n>0||i>-n)&&(i+=n),0===i&&-12===n&&(i=12),a(i,t,r)}}function o(e,t){return function(n,a){var r=n["get"+e](),o=(t?"SHORT"+e:e).toUpperCase();return a[o][r]}}function i(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=a(Math[t>0?"floor":"ceil"](t/60),2)+a(Math.abs(t%60),2)}function s(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function l(e,t){var a,r,o=l.locate,i="",s=[];if(t=t||"mediumDate",t=o[t]||t,"string"==typeof e)if(/^\d+$/.test(e))e=n(e);else if(p.test(e))e=+RegExp.$1;else{var v=e.trim(),f=[0,0,0,0,0,0,0],d=new Date(0);v=v.replace(/^(\d+)\D(\d+)\D(\d+)/,function(e,t,a,r){var o=4===r.length?[r,t,a]:[t,a,r];return f[0]=n(o[0]),f[1]=n(o[1])-1,f[2]=n(o[2]),""});var h=d.setFullYear,m=d.setHours;v=v.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(e,t,a,r,o){return f[3]=n(t),f[4]=n(a),f[5]=n(r),o&&(f[6]=Math.round(1e3*parseFloat("0."+o))),""});var g=0,y=0;v=v.replace(/Z|([+-])(\d\d):?(\d\d)/,function(e,t,a,r){return h=d.setUTCFullYear,m=d.setUTCHours,t&&(g=n(t+a),y=n(t+r)),""}),f[3]-=g,f[4]-=y,h.apply(d,f.slice(0,3)),m.apply(d,f.slice(3)),e=d}if("number"==typeof e&&(e=new Date(e)),"date"===avalon.type(e)){for(;t;)r=u.exec(t),r?(s=s.concat(r.slice(1)),t=s.pop()):(s.push(t),t=null);return s.forEach(function(t){a=c[t],i+=a?a(e,o):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}var c={yyyy:r("FullYear",4),yy:r("FullYear",2,0,!0),y:r("FullYear",1),MMMM:o("Month"),MMM:o("Month",!0),MM:r("Month",2,1),M:r("Month",1,1),dd:r("Date",2),d:r("Date",1),HH:r("Hours",2),H:r("Hours",1),hh:r("Hours",2,-12),h:r("Hours",1,-12),mm:r("Minutes",2),m:r("Minutes",1),ss:r("Seconds",2),s:r("Seconds",1),sss:r("Milliseconds",3),EEEE:o("Day"),EEE:o("Day",!0),a:s,Z:i},u=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,p=/^\/Date\((\d+)\)\/$/,v={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};v.SHORTMONTH=v.MONTH,l.locate=v,e.exports=l},function(e,t){function n(e){return String(e).replace(/&/g,"&amp;").replace(a,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(r,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/([^\#-~| |!])/g;e.exports=n},function(e,t){var n={stop:function(e){return e.stopPropagation(),e},prevent:function(e){return e.preventDefault(),e}},a={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};avalon.each(a,function(e,t){n[e]=function(e){return e.which!==t&&(e.$return=!0),e}}),e.exports=n},function(e,t,n){function a(e){return e}function r(e){return null==e?"":e}var o=n(26),i=n(23),s=n(27),l=n(22),c=n(21),u=n(24),p=avalon.filters;avalon.mix({__read__:function(e){var t=p[e];return t?t.get?t.get:t:a},__write__:function(e){var t=p[e];return t&&t.set||a}}),avalon.mix(p,{uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n="string"==typeof n?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e)},camelize:avalon.camelize,date:l,escape:i,sanitize:s,currency:function(e,t,n){return(t||"￥")+o(e,isFinite(n)?n:2)}},c,u),avalon.mix(p,{checked:{get:function(e,t){return!t.oldValue}},string:{get:function(e){return null==e?"":e+""},set:r},"boolean":{get:function(e){return"true"===e},set:r},number:{get:function(e){if(2===arguments.length){var t=arguments[1];if(t&&1===t.nodeType){var n=parseFloat(e);return""===e?"":n!==n?0:n}}return o.apply(0,arguments)},set:r}}),e.exports=avalon},function(e,t){function n(e,t,n,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):3,i=a||",",s=n||".",l="",c=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return l=(o?c(r,o):""+Math.round(r)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(l[1]||"").length<o&&(l[1]=l[1]||"",l[1]+=new Array(o-l[1].length+1).join("0")),l.join(s)}e.exports=n},function(e,t){var n=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,a=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,r=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,o={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi};e.exports=function(e){return e.replace(n,"").replace(r,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var r=o[n[1]];r&&(e=e.replace(r,function(e,t,n){var a=n.charAt(0);return t+"="+a+"javascript:void(0)"+a}))}return e.replace(a," ").replace(/\s+/g," ")})}},function(e,t){(function(t){var n=t,a={window:n,document:{createElement:function(){return{}},createElementNS:function(){return{}},contains:Boolean},root:{outerHTML:"x"},msie:NaN,modern:!0,avalonDiv:null,avalonFragment:null};if(n.window===n){var r=n.document;a.document=r,a.modern=n.dispatchEvent,a.root=r.documentElement,a.avalonDiv=r.createElement("div"),a.avalonFragment=r.createDocumentFragment(),n.VBArray&&(a.msie=r.documentMode||(n.XMLHttpRequest?7:6))}a.nextTick=function(){function e(){for(var e=o.length,t=0;e>t;t++)o[t]();o=o.slice(e)}var t=n.setImmediate,a=n.MutationObserver;if(t)return t.bind(n);var o=[];if(a){var i=r.createTextNode("avalon");new a(e).observe(i,{characterData:!0});var s=!1;return function(e){o.push(e),s=!s,i.data=s}}return function(e){setTimeout(e,4)}}(),e.exports=a}).call(t,function(){return this}())},function(e,t){function n(e){for(var t in e)if(avalon.ohasOwn.call(e,t)){var a=e[t];"function"==typeof n.plugins[t]?n.plugins[t](a):"object"==typeof n[t]?avalon.mix(n[t],a):n[t]=a}return this}avalon.config=n;var a={interpolate:function(e){var t=e[0],a=e[1];if(t===a)throw new SyntaxError("openTag!==closeTag");var r=t+"test"+a,o=avalon.avalonDiv;if(o.innerHTML=r,o.innerHTML!==r&&o.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");o.innerHTML="",n.openTag=t,n.closeTag=a;var i=avalon.escapeRegExp(t),s=avalon.escapeRegExp(a);n.rexpr=new RegExp(i+"([\\ss\\S]*)"+s),n.rexprg=new RegExp(i+"([\\ss\\S]*)"+s,"g"),n.rbind=new RegExp(i+"[\\ss\\S]*"+s+"|\\b(?:ms|a)-")}};n.plugins=a,n.plugins.interpolate(["{{","}}"]),n.debug=!0},function(e,t){(function(t){function n(e){return new n.init(e)}t.avalon=n,n.init=function(e){this[0]=this.element=e},n.fn=n.prototype=n.init.prototype,n.mix=function(e,t){for(var n in t)e[n]=t[n];return e};var a=/[^, ]+/g,r=window.console;n.mix(n,{noop:function(){},rword:a,inspect:{}.toString,ohasOwn:{}.hasOwnProperty,log:function(){r&&n.config.debug&&Function.apply.call(console.log,console,arguments)},warn:function(){if(r&&n.config.debug){var e=console.warn||console.log;Function.apply.call(e,console,arguments)}},error:function(e,t){throw(t||Error)(e)},oneObject:function(e,t){"string"==typeof e&&(e=e.match(a)||[]);for(var n={},r=void 0!==t?t:1,o=0,i=e.length;i>o;o++)n[e[o]]=r;return n}}),e.exports=n}).call(t,function(){return this}())},function(e,t,n){function a(e,t){var n=avalon.vmodels[e];if(document.nodeName&&n&&n.$render&&(i[e]=!0,!s)){var l=n.$element;l&&r(function(){s=!0;var t=n.$render();avalon.diff(t,l.vnode||[]),o([l],t),l.vnode=t,avalon.log("rerender",new Date-avalon.rerenderStart),s=!1,delete i[e];for(var r in i){a(r,!0);break}},t)}}function r(e,t){t?e():avalon.nextTick(e)}var o=n(3),i={},s=!1;e.exports=avalon.batch=a},function(e,t){function n(e,t){for(var r=0;r<e.length;r++){var l=e[r],c=t[r]||s;switch(l.type){case"#text":l.skipContent||o.expr.diff(l,c);break;case"#comment":"for"===l.directive?r=o["for"].diff(e,t,r):"if"===l.directive&&o["if"].diff(l,c);break;default:l.skipAttrs||a(l,c),l.skipContent||n(l.children,c.children||i)}}}function a(e,t){e.change=e.change||[];for(var n in e.props){var a=n.match(r);if(a){var i=a[1];try{o[i]&&o[i].diff(e,t||s,i,n)}catch(l){avalon.log(e,t,l,"diffProps error")}}}}var r=/^(?:ms|a)-(\w+)-?(.*)/,o=avalon.directives,i=[],s={children:[],props:{}};e.exports=n},function(e,t){function n(e,t){var n,a=t.split(".")[0];try{e.hasOwnProperty(a)&&(n=e.$accessors?e.$accessors[a].get.heirloom.__vmodel__:Object.getOwnPropertyDescriptor(e,a).get.heirloom.__vmodel__)}catch(r){avalon.log("adjustVm "+r)}return n||e}function a(e,t){var a=n(this,e),r=a.$events,o=r[e]||(r[e]=[]);return a!==this&&(this.$events[e]=o),avalon.Array.ensure(o,t),function(){avalon.Array.remove(o,t)}}function r(e,t,n,a,o,i){if(e&&e.length)try{for(i=i||e.length-1;i>=0;i--){var s=e[i];s.call(t,a,o,n)}}catch(l){i-1>0&&r(e,t,n,a,o,i-1),avalon.log(l,n)}}e.exports={$emit:r,$watch:a,adjustVm:n}},function(e,t,n){function a(e){var t=t||String(new Date-0).slice(0,6),n=r(e,t)+"\n\nreturn nodes"+t,a=Function("__vmodel__",n);return a}avalon.lexer=n(35),avalon.diff=n(32),avalon.batch=n(31);var r=n(39);avalon.render=a,e.exports=avalon},function(e,t,n){function a(e){var t="??"+C++;return T[t]=e,t}function r(e){var t=T[e];return t}function o(e,t){var n=[];if(t&&!O.test(e))return n;for(t||(e=e.replace(x,a));;){var o="",l=!1,u=e.match(g);if(u&&(o=u[0],l=new f(o.replace(b,r))),!l&&(u=e.match(y),u&&(o=u[0],l=new d(u[1].replace(b,r)),k.test(l.nodeValue)))){var v=n[n.length-1];v&&"#text"===v.type&&w.test(v.nodeValue)&&n.pop()}if(!l&&(u=e.match(h))){o=u[0];var _=u[1].toLowerCase();o=i(o,_),u=o.match(m);var C={};u[2]&&c(u[2],C);var M=o.slice(u[0].length,-1*(_.length+3));l={type:_,props:C,template:M.replace(b,r).trim(),children:[]},l=s(l,M,n)}if(l||(u=e.match(m),u&&(o=u[0],_=u[1].toLowerCase(),C={},u[2]&&c(u[2],C),l={type:_,props:C,template:"",children:[],isVoidTag:!0},s(l,"",n))),!l)break;n.push(l),e=e.slice(o.length),"#comment"===l.type&&A.test(l.nodeValue)&&(l.signature=p("for"),e=e.replace(E,""))}return t||(T={}),n}function i(e,t){var n=[],a=[],r=$[t+"open"]||($[t+"open"]=new RegExp("<"+t+M,"g")),o=$[t+"close"]||($[t+"close"]=new RegExp("</"+t+">","g"));e.replace(r,function(e,t){return n.push(("0000000000"+t+"<").slice(-10)),e.replace(D,"1")}).replace(o,function(e,t){a.push(("0000000000"+t+">").slice(-10))});for(var i=n.concat(a).sort(),s=i.join("").replace(_,""),l=0,c=0,u=0,p=s.length;p>u;u++){var v=s.charAt(u);if("<"===v?l+=1:l-=1,0===l){c=u;break}}var f=parseFloat(i[c])+t.length+3;return e.slice(0,f)}function s(e,t,n){var a=e.type;if(e.props["a-skip"])e.skipContent=!0;else{switch(a){case"style":case"script":case"noscript":case"template":case"textarea":e.skipContent=!0,"textarea"===a&&(e.props.type="textarea");break;case"input":e.props.type||(e.props.type="text");case"xmp":e.children.push(new f(e.template));break;case"option":e.children.push(new f(u(e.template)));break;default:if(!e.isVoidTag){var r=o(t,!0);e.children=r,"table"===a&&l(e.children)}}var i=e.props["ms-for"]||e.props["a-for"];i&&(n.push({type:"#comment",nodeValue:"a-for:"+i,signature:p("for")}),delete e.props["ms-for"],delete e.props["a-for"],n.push(e),e={type:"#comment",nodeValue:"a-for-end:"})}return e}function l(e){for(var t,n=!1,a=0,r=0,o=e.length,i=0;o>i;i++){var s=e[i];t?"tr"!==s.type&&"#"!==s.type.charAt(0)?t=!1:(t.children.push(s),a++,e[i]=0):"tr"===s.type&&(t={type:"tbody",template:"",children:[],props:{}},t.children.push(s),n=!0,0===r&&(r=i),e[i]=t)}if(n)for(i=r;o>i&&(0!==e[i]||(e.splice(i,1),i--,a--,0!==a));i++);}function c(e,t){e.replace(L,"=").replace(S,function(e){var n=e.split("="),a=n[1]||"",o=n[0].toLowerCase();2===n.length&&0===a.indexOf("??")&&(a=a.replace(b,r).slice(1,-1).replace(j,"&").replace(V,'"')),t[o]=a})}function u(e){return String(e).replace(N,"").trim()}var p=avalon.makeHashCode,v=n(5),f=v.VText,d=v.VComment,h=/^<([^\s>\/=.$<]+)(?:\s+[^=\s]+(?:=[^>\s]+)?)*\s*>(?:[\s\S]*)<\/\1>/,m=/^<([^\s>\/=.$<]+)\s*([^>]*?)\/?>/,g=/^[^<]+/,y=/^<!--([\w\W]*?)-->/,x=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g,b=/\?\?\d+/g,_=/\d+/g,w=/^\s+$/,A=/^(ms|a)-for\:/,k=/^(ms|a)-for-end\:/,E=/^\s+/,O=avalon.config.rbind,T={},C=1,M="(?:\\s+[^>=]*?(?:=[^>]+?)?)*>",$={},D=/./g,j=/&amp;/g,S=/\S+/g,V=/&quot;/g,L=/\s*=\s*/g,N=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi;e.exports=o},function(e,t){function n(e,t,n){var c=[],u="ms-skip"in e||"a-skip"in e,p="";for(var v in e){var f,d=e[v];if(!u&&d&&(f=v.match(s))){var h=f[1],m=f[2]||"",g=v;if(l[h]){var y=parseFloat(m)||0;m=h,h="on"}if(g="a-"+h+(m?"-"+m:""),v!==g&&(delete e[v],e[g]=d),i[h]){var x={type:h,param:m,name:g,expr:d,priority:i[h].priority||100*h.charCodeAt(0)};"on"===h&&(x.name+="-"+y,x.priority+=100*m.charCodeAt(0)+y),c.push(x)}}else p+=r.test(v)?"vnode"+t+".props["+o(v)+"] = "+o(d)+"\n":"vnode"+t+".props."+v+" = "+o(d)+"\n"}return c.length?(avalon.parseExpr(x),c.sort(a).forEach(function(e){p+=i[e.type].parse(e,t,n)})):p+="vnode"+t+".skipAttrs = true\n",p}function a(e,t){return e.priority-t.priority}var r=/[W-]/,o=avalon.quote,i=avalon.directives,s=/^(?:ms|a)-(\w+)-?(.*)/,l=avalon.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");e.exports=n},function(e,t,n){function a(e,t){function n(e){var t="??"+y++;return x[t]=e,t}function a(e){return x[e]}var h={};t=t||"other","object"==typeof e&&(t=e.type,h=e,e=h.expr);var m=e.trim(),g=o.get(t+":"+m);if(g)return g;var y=1,x={};m=m.replace(i,n).replace(s,n).replace(v,n).replace(d,"$1").split(f);var b=m.shift().replace(l,a).trim();
if("on"===t&&p.test(b)&&(b+="($event)"),b=b.replace(u,"$1__vmodel__."),"js"===t)return o.put(t+":"+m,b);var _=m.map(function(e){e=e.replace(l,a).replace(u,"$1__vmodel__.");var t=!1;return e=e.replace(c,function(e,n){return t=!0,/\S/.test(n)?"(__value__,"+n+");":"(__value__);"}),t||(e+="(__value__);"),e=e.replace(/(\w+)/,'avalon.__read__("$1")'),"__value__ = "+e}),w=[];if("on"===t)_=_.map(function(e){return e.replace(/__value__/g,"$event")}),_.length&&_.push("if($event.$return){\n	return;\n}"),w=["function self($event){","try{","	var __vmodel__ = this;","	"+b,"}catch(e){","	avalon.log(e, "+r(e,t)+")","}","}"],_.unshift(2,0);else{if("duplex"===t){var A=_.map(function(e){return e=e.replace(/__read__/g,"__write__"),e.replace(");",",__elem__);")}),k=["function (__vmodel__, __value__, __elem__){","if(!__elem__ || __elem__.nodeType !== 1) ","	return","try{","	"+b+" = __value__","}catch(e){","	avalon.log(e, "+r(e,t)+")","}","}"];k.splice(3,0,A.join("\n"));var E=Function("return "+k.join("\n"))();o.put("duplex:"+e.trim()+":setter",E);var O=_.map(function(e){return e.replace(");",",__elem__);")}),T=["function (__vmodel__, __value__, __elem__){","try{","if(arguments.length === 1)","	return "+b,"if(!__elem__ || __elem__.nodeType !== 1) return ","return __value__","}catch(e){","	avalon.log(e, "+r(e,t)+")","}","}"];return T.splice(5,0,O.join("\n")),E=Function("return "+T.join("\n"))(),void o.put("duplex:"+e.trim(),E)}w=["(function(){","try{","var __value__ = "+b,"return __value__","}catch(e){","	avalon.log(e, "+r(e,t)+")",'	return ""',"}","})()"],_.unshift(3,0)}return w.splice.apply(w,_),g=w.join("\n"),o.put(t+":"+m,g),g}function r(e,t){return avalon.quote("parse "+t+" binding【 "+e+" 】fail")}var o=n(4),i=/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,s=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g,l=/\?\?\d+/g,c=/\(([^)]*)\)/,u=/(^|[^\w\u00c0-\uFFFF_])(@)(?=\w)/g,p=/^\@[$\w]+$/,v=/\|\|/g,f=/\|(?=\w)/,d=/\s*(\.|\|)\s*/g;e.exports=avalon.parseExpr=a},function(e,t){function n(e){for(var t,n,r=[],o=0;;){if(n=e.indexOf(avalon.config.openTag,o),-1===n)break;if(t=e.slice(o,n),0===o&&(t=t.replace(/^\s+/,"")),t&&r.push({expr:t}),o=n+avalon.config.openTag.length,n=e.indexOf(avalon.config.closeTag,o),-1===n)break;t=e.slice(o,n),t&&r.push({expr:t.replace(a,""),type:"{{}}"}),o=n+avalon.config.closeTag.length}return t=e.slice(o),t.replace(/\s+$/,"")&&r.push({expr:t.replace(/\s+$/,"")}),r}var a=/\r?\n/g;e.exports=n},function(e,t,n){function a(e,t){return"(function(){\n\n"+e+"\n\nreturn nodes"+t+"\n})();\n"}function r(e,t){t=t||String(new Date-0).slice(0,5);for(var n=[],p=!1,v="nodes"+t,f="vnode"+t,d="var "+v+" = []\n",h=0;h<e.length;h++){var m=e[h];if("#text"===m.type){d+="var "+f+' = {type:"#text", skipContent:true}\n';var g=l.test(m.nodeValue);if(g){var y=i(m.nodeValue,!1);if(1===y.length)var x=o(y[0].expr);else x=y.map(function(e){return e.type?"String("+o(e.expr)+")":c(e.expr)}).join(" + ");d+=f+".nodeValue = String("+x+")\n",d+=f+".skipContent = false\n"}else d+=f+".nodeValue = "+c(m.nodeValue)+"\n";d+=v+".push("+f+")\n"}else{if("#comment"===m.type){var b=m.nodeValue;if(0===b.indexOf("a-for:")){var _=m.signature;n.push(_),d+=v+'.push({\n	type:"#comment",\n	directive:"for",\n	skipContent:false,\n	signature:'+c(_)+",\n	nodeValue:"+c(b)+"\n})\n",d+=avalon.directives["for"].parse(b,t)}else if(0===b.indexOf("a-for-end:")){var _=n[n.length-1];if(d+=v+'.push({\n	type:"#comment",\n	skipContent:true,\n	nodeValue:'+c(_)+",\n	key:traceKey\n})\n",d+="\n})\n",n.length){var _=n[n.length-1];d+=v+'.push({\n	type:"#comment",\n	skipContent:true,\n	signature:'+c(_)+",\n	nodeValue:"+c(_+":end")+",\n})\n",n.pop()}}else d+=0===b.indexOf("a-js:")?o(b.replace("a-js:",""),"js")+"\n":v+".push("+c(m)+");;;;\n";continue}var p=m.props["a-if"]||m.props["ms-if"];p&&(m.props["a-if"]=p,m.signature=u("a-if"),delete m.props["ms-if"],d+="if(!("+o(p,"if")+")){\n",d+=v+'.push({\n	type: "#comment",\n	directive: "if",\n	nodeValue:'+c(m.signature)+",\n\n	signature:"+c(m.signature)+',\n\n	props: {"a-if":true} })\n',d+="\n}else{\n\n"),d+="var "+f+" = {\n	type: "+c(m.type)+",\n	props: {},\n	children: [],\n	isVoidTag: "+!!m.isVoidTag+',\n	template: ""}\n';var w=s(m.props,t,m);w&&(d+=w),m.children.length?(d+="if(!"+f+".props.wid){\n",d+="	"+f+".children = "+a(r(m.children,t),t)+"\n",d+="}\n"):d+=f+".template= "+c(m.template)+"\n",d+=v+".push("+f+")\n",p&&(d+="}\n",p=!1)}}return d}var o=n(37),i=n(38),s=n(36),l=avalon.config.rexpr,c=avalon.quote,u=avalon.makeHashCode;e.exports=r},function(e,t){function n(e){if("string"==typeof e)this.type="#comment",this.nodeValue=e,this.skipContent=!0;else for(var t in e)this[t]=e[t]}n.prototype={constructor:n,clone:function(){return new n(this)},toDOM:function(){return document.createComment(this.nodeValue)},toHTML:function(){return"<!--"+this.nodeValue+"-->"}},e.exports=n},function(e,t){function n(e){for(var t in e)this[t]=e[t];var n=this.__type__=this.type;this.type="#component";var a=avalon.components[n];a&&a.init&&arguments.length&&a.init.apply(this,arguments)}n.prototype={toDOM:function(){var e=avalon.components[this.__type__];if(e&&e.toDOM)return e.toDOM.call(this);for(var t=document.createDocumentFragment(),n=0;n<this.children.length;n++)t.appendChild(this.children[n].toDOM());return t},toHTML:function(){var e=avalon.components[this.__type__];if(e&&e.toHTML)return e.toHTML.call(this);for(var t="",n=0;n<this.children.length;n++)t+=this.children[n].toHTML();return t}},e.exports=n},function(e,t){function n(e,t,n){if("object"==typeof e)for(var a in e)this[a]=e[a];else this.type=e,this.props=t,this.children=n,this.template=""}function a(e){return e!==!1&&"function"!=typeof e}n.prototype={constructor:n,toDOM:function(){var e=document.createElement(this.type);for(var t in this.props){var n=this.props[t];a(n)&&e.setAttribute(t,n+"")}if(this.skipContent)switch(this.type){case"script":e.text=this.template;break;case"style":case"template":e.innerHTML=this.template;break;case"noscript":e.textContent=this.template;break;default:var r=avalon.parseHTML(this.template);e.appendChild(r)}else this.isVoidTag||(this.children.length?this.children.forEach(function(t){e.appendChild(avalon.vdomAdaptor(t).toDOM())}):window.Range?e.innerHTML=this.template:e.appendChild(avalon.parseHTML(this.template)));return e},toHTML:function(){var e=[];for(var t in this.props){var n=this.props[t];a(n)&&e.push(t+"="+avalon.quote(this.props[t]+""))}e=e.length?" "+e.join(" "):"";var r="<"+this.type+e;return this.isVoidTag?r+"/>":(r+=">",r+=this.children.length?this.children.map(function(e){return avalon.vdomAdaptor(e).toHTML()}).join(""):this.template,r+"</"+this.type+">")}},e.exports=n},function(e,t){function n(e){if("string"==typeof e)this.type="#text",this.nodeValue=e,this.skipContent=!a.test(e);else for(var t in e)this[t]=e[t]}var a=avalon.config.rexpr;n.prototype={constructor:n,toDOM:function(){return document.createTextNode(this.nodeValue)},toHTML:function(){return this.nodeValue}},e.exports=n},function(e,t,n){function a(e,t){t.__vmodel__=e;var n=p.hideProperty;n(e,"$events",t),n(e,"$watch",function(){if(2===arguments.length)return c.apply(e,arguments);throw"$watch方法参数不对"}),n(e,"$fire",function(t,n,a){var r=e.$events[t];u(r,e,t,n,a)})}function r(e,t,n){return"$"===e.charAt(0)||n[e]||"function"==typeof t||t&&t.nodeName&&t.nodeType>0}function o(e,t,n,a){if(Array.isArray(e))return p.arrayFactory(e,t,n,a);if(avalon.isPlainObject(e)){if(Object(t)===t){var r=p.slaveFactory(t,e,n,a);for(var o in e)v[o]||(r[o]=e[o]);return r}return r=p.masterFactory(e,n,a)}return e}function i(e,t,n){function a(){return r}var r=NaN;return a.heirloom=n,{get:a,set:function(o){if(r!==o){o&&"object"==typeof o&&(o=p.modelAdaptor(o,r,n,{pathname:t,id:e}));var i=r;r=o;var s=n.__vmodel__;if(this.$hashcode&&s){if(s&&n!==s.$events&&(a.heirloom=s.$events),u(a.heirloom[t],s,t,o,i),e.indexOf(".*.")>0){var l=e.match(f),c=avalon.vmodels[l[1]];if(c){var v=l[2];u(c.$events[v],s,v,o,i)}}var d=s.$id.split(".")[0];avalon.rerenderStart=new Date,avalon.batch(d,!0)}}},enumerable:!0,configurable:!0}}function s(e){var t=e.$id;!t&&avalon.config.debug&&avalon.warn("vm.$id must be specified");var n=p.masterFactory(e,{},{pathname:"",id:t,master:!0});if(avalon.vmodels[t])throw Error("error:[",t,"] had defined!");return avalon.vmodels[t]=n}var l=n(33),c=l.$watch,u=l.$emit,p={},v=n(6);p.modelAdaptor=o;var f=/([^.]+)\.(.+)/,d={set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length)throw Error(e+"set方法的第一个参数不能大于原数组长度");this.notify("*",t,this[e],!0),this.splice(e,1,t)}},contains:function(e){return-1!==this.indexOf(e)},ensure:function(e){return this.contains(e)||this.push(e),this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>>>0===e?this.splice(e,1):[]},clear:function(){return this.removeAll(),this}};avalon.define=s,e.exports={$$midway:p,$$skipArray:v,__array__:d,isSkip:r,makeFire:a,makeAccessor:i,modelAdaptor:o}},,,,function(e,t,n){var a=n(55);avalon.directive("attr",{parse:function(e,t){return"vnode"+t+'.props["a-attr"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-attr"],a=t.props["a-attr"];if(Object(n)===n){if(Array.isArray(n)&&(n=e.props["a-attr"]=avalon.mix.apply({},n)),"object"!=typeof a)e.changeAttr=n;else{var r={},o=!1;for(var i in n)n[i]!==a[i]&&(o=!0,r[i]=n[i]);o&&(e.changeAttr=r)}if(e.changeAttr){var s=e.change||(e.change=[]);avalon.Array.ensure(s,this.update)}}else e.props["a-attr"]=a},update:a})},,,function(e,t,n){function a(e){var t=e.props.type,n=e.props.xtype,a={};switch(n){case"checked":a.click=c;break;case"radio":a.click=v;break;case"checkbox":a[9>m?"click":"change"]=u;break;case"change":a.change=v;break;case"select":e.children.length||b(e.children,avalon.lexer(e.template)),a.change=f;break;case"input":m?(m>8?(9===m&&(a.keyup=v),a.input=v):a.propertychange=duplexValueHack,a.dragend=p):(a.input=v,a.compositionstart=o,a.compositionend=i,a.DOMAutoComplete=v)}"input"!==n||E.test(t)||("hidden"!==t&&(a.focus=s,a.blur=l),a.watchValueInTimer=!0),a.vmodel=e.duplexVm,a.vnode=e,a.set=function(e,t){var n=this.vnode;if("checkbox"===n.props.xtype){var a=n.props.value;Array.isArray(a)||(avalon.warn("ms-duplex应用于checkbox上要对应一个数组"),a=[a]);var r=t?"ensure":"remove";a[r]&&a[r](e)}else this.setter(this.vmodel,e,this.elem)},a.get=function(e){return this.getter(this.vmodel,e,this.elem)};var d=e.props["a-duplex"];a.getter=_.get("duplex:"+d),a.setter=_.get("duplex:"+d+":setter"),e.duplexData=a,e.dispose=r}function r(){var e=this.duplexData.elem;e&&(e.oldValue=e.valueSet=e.duplexData=void 0,avalon.unbind(e),this.dom=null)}function o(){this.composing=!0}function i(){this.composing=!1}function s(){this.msFocus=!0}function l(){this.msFocus=!1}function c(){var e=this,t=e.duplexData,n=e.oldValue=t.get();t.set(n)}function u(){var e=this,t=e.duplexData.get(e.value);e.duplexData.set(t,e.checked)}function p(e){var t=this;setTimeout(function(){v.call(t,e)},17)}function v(){var e,t=this,n=t.value;if(!t.composing&&n!==t.oldValue){if(t.msFocus)try{var a=t.selectionStart,r=t.selectionEnd;if(a===r){var o=a;e=!0}}catch(i){avalon.warn("fixCaret error",i)}var s=t.duplexData.get(n);try{t.value=t.oldValue=s+"",e&&!t.readOnly&&(t.selectionStart=t.selectionEnd=o),t.duplexData.set(s)}catch(l){avalon.log(l)}}}function f(){var e=this,t=avalon(e).val();if(t=Array.isArray(t)?t.map(function(t){return e.duplexData.get(t)}):e.duplexData.get(t),t+""!==e.oldValue)try{e.duplexData.set(t)}catch(n){avalon.warn(n)}}function d(e,t){avalon(e).val(t.value)}function h(){for(var e=T.length-1;e>=0;e--){var t=T[e];t()===!1&&T.splice(e,1)}T.length||clearInterval(O)}var m=avalon.msie,g=avalon.quote,y=n(1).getLongID,x=avalon.document,b=avalon.Array.merge,_=n(4),w=/\|\s*change\b/,A=/\|\s*checked\b/,k=/^(?:checkbox|radio)$/,E=/^(file|button|reset|submit|checkbox|radio|range)$/;avalon.directive("duplex",{priority:2e3,parse:function(e,t,n){var a=e.expr,r=n.props.type;return A.test(a)&&(k.test(r)?xtype="checked":(avalon.warn("只有radio与checkbox才能用checked过滤器"),a=a.replace(A,""))),w.test(a)&&(E.test(r)?(avalon.warn(r+"不支持change过滤器"),a=a.replace(w,"")):xtype="change"),xtype||(xtype="select"===r?"select":"checkbox"===r?"checkbox":"radio"===r?"radio":"input"),e.expr=a,avalon.parseExpr(e,"duplex"),"vnode"+t+".duplexVm = __vmodel__;\nvnode"+t+".props.xtype = "+g(xtype)+";\nvnode"+t+".props['a-duplex'] = "+g(e.expr)+";\n"},diff:function(e,t){t.duplexData&&t.duplexData.set?e.duplexData=t.duplexData:a(e);var n=e.duplexData;delete e.duplexVm;var r=e.props.value=n.getter(n.vmodel);if(n.elem){var o=t.props.value;i=Array.isArray(r)?r+""==o+"":r===o}else var i=!1;if(!i){var s=e.afterChange||(e.afterChange=[]);"select"===e.type&&avalon.Array.ensure(s,d);var l=e.change||(e.change=[]);avalon.Array.ensure(l,this.update)}},update:function(e,t){var n=e.duplexData=t.duplexData;if(!n.elem){n.elem=e;for(var a in n){var r=n[a];getset[a]||"function"!=typeof r||(avalon.bind(e,a,n[a]),delete n[a])}n.watchValueInTimer&&(e.valueSet=v,C(function(){return t.disposed?!1:void(e.msFocus||e.valueSet())}),delete n.watchValueInTimer)}var o=t.props.value;switch(t.props.xtype){case"input":case"change":o!==e.oldValue&&(e.value=o);break;case"checked":case"radio":o="checked"===t.props.xtype?!!o:o+""===e.value,e.oldValue=o,e.checked=o;break;case"checkbox":var i=[].concat(o);o=n.get(e.value),e.checked=i.indexOf(o)>-1;break;case"select":}}}),d.priority=2001,y(o),y(i),y(s),y(l),y(v),y(p),y(u),y(f),m&&avalon.bind(x,"selectionchange",function(e){var t=x.activeElement||{};!t.msFocus&&t.valueSet&&t.valueSet()});var O,T=[];avalon.tick=function(e){1===T.push(e)&&(O=setInterval(h,60))};var C=avalon.noop;!function(){function e(e){t[this.tagName].call(this,e),!this.msFocus&&this.valueSet&&this.valueSet()}try{var t={},n=HTMLInputElement.prototype,a=HTMLTextAreaElement.prototype,r=HTMLInputElement.prototype;Object.getOwnPropertyNames(r),t.INPUT=Object.getOwnPropertyDescriptor(n,"value").set,Object.defineProperty(n,"value",{set:e}),t.TEXTAREA=Object.getOwnPropertyDescriptor(a,"value").set,Object.defineProperty(a,"value",{set:e})}catch(o){C=avalon.tick}}()},function(e,t,n){n(48),n(9),n(8),n(10),n(15),n(12),n(16),n(7),n(14),n(51),n(13),n(11)},,,function(e,t,n){function a(e,t){var n=t.changeAttr;if(n)for(var a in n){var i=n[a];if("src"===a&&window.chrome&&"EMBED"===e.tagName){e[a]=i;var s=e.parentNode,l=document.createComment("ms-src");s.replaceChild(l,e),s.replaceChild(e,l)}else if(0==a.indexOf("data-"))e.setAttribute(a,i);else{var c=r[a]||a;if("boolean"==typeof e[c]&&(e[c]=!!i),i===!1){e.removeAttribute(a);continue}var u=o.test(e)?!1:a in e.cloneNode(!1);u?e[c]=i+"":e.setAttribute(a,i)}}delete t.changeAttr}var r=n(17),o=/^\[object SVG\w*Element\]$/;e.exports=a},,function(e,t){var n=/\S+/g;"add,remove".replace(avalon.rword,function(e){avalon.fn[e+"Class"]=function(t){var a=this[0]||{};return t&&"string"==typeof t&&1===a.nodeType&&t.replace(n,function(t){a.classList[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&t.classList.contains(e)},toggleClass:function(e,t){var a="boolean"==typeof t,r=this;return String(e).replace(n,function(e){var n=a?t:!r.hasClass(e);r[n?"addClass":"removeClass"](e)}),this}})},,,function(e,t){function n(e,t){if(e.offsetWidth<=0){var a=getComputedStyle(e,null);if(u.test(a.display)){var r={node:e};for(var o in c)r[o]=a[o],e.style[o]=c[o];t.push(r)}var i=e.parentNode;i&&1===i.nodeType&&n(i,t)}}function a(e){return e.window&&e.document?e:9===e.nodeType?e.defaultView:!1}var r=avalon.root,o=avalon.camelize,i=avalon.cssHooks,s=["","-webkit-","-o-","-moz-","-ms-"],l={"float":"cssFloat"};avalon.cssNumber=avalon.oneObject("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(l[e])return l[e];t=t||r.style;for(var a=0,i=s.length;i>a;a++)if(n=o(s[a]+e),n in t)return l[e]=n;return null},avalon.fn.css=function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var a=avalon.css(this,e,t);return void 0!==a?a:this},avalon.fn.position=function(){var e,t,n=this[0],a={top:0,left:0};return n?("fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(a=e.offset()),a.top+=avalon.css(e[0],"borderTopWidth",!0),a.left+=avalon.css(e[0],"borderLeftWidth",!0),a.top-=e.scrollTop(),a.left-=e.scrollLeft()),{top:t.top-a.top-avalon.css(n,"marginTop",!0),left:t.left-a.left-avalon.css(n,"marginLeft",!0)}):a},avalon.fn.offsetParent=function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||r)},i["@:set"]=function(e,t,n){e.style[t]=n},i["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,a=getComputedStyle(e);return a&&(n="filter"===t?a.getPropertyValue(t):a[t],""===n&&(n=e.style[t])),n},i["opacity:get"]=function(e){var t=i["@:get"](e,"opacity");return""===t?"1":t},"top,left".replace(avalon.rword,function(e){i[e+":get"]=function(t){var n=i["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var c={position:"absolute",visibility:"hidden",display:"block"},u=/^(none|table(?!-c[ea]).+)/;avalon.each({Width:"width",Height:"height"},function(e,t){var a="client"+e,r="scroll"+e,o="offset"+e;i[t+":get"]=function(t,n,a){var r=-4;"number"==typeof a&&(r=a),n="Width"===e?["Left","Right"]:["Top","Bottom"];var i=t[o];return 2===r?i+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(0>r&&(i=i-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),-4===r&&(i=i-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),i)},i[t+"&get"]=function(e){var a=[];n(e,a);for(var r,o=i[t+":get"](e),s=0;r=a[s++];){e=r.node;for(var l in r)"string"==typeof r[l]&&(e.style[l]=r[l])}return o},avalon.fn[t]=function(n){var s=this[0];if(0===arguments.length){if(s.setTimeout)return s["inner"+e];if(9===s.nodeType){var l=s.documentElement;return Math.max(s.body[r],l[r],s.body[o],l[o],l[a])}return i[t+"&get"](s)}return this.css(t,n)},avalon.fn["inner"+e]=function(){return i[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return i[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0];try{var t=e.getBoundingClientRect();if(t.width||t.height||e.getClientRects().length){var n=e.ownerDocument,a=n.documentElement,r=n.defaultView;return{top:t.top+r.pageYOffset-a.clientTop,left:t.left+r.pageXOffset-a.clientLeft}}}catch(o){return{left:0,top:0}}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var r=this[0]||{},o=a(r),i="scrollTop"===e;return arguments.length?void(o?o.scrollTo(i?o[t]:n,i?n:o[t]):r[e]=n):o?o[t]:r[e]}})},,function(e,t){function n(e){try{if("object"==typeof e)return e;e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:a.test(e)?JSON.parse(e):e}catch(t){}return e}var a=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;avalon.parseJSON=JSON.parse,avalon.fn.attr=function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},avalon.fn.data=function(e,t){switch(e="data-"+avalon.hyphen(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var a=this.attr(e);return n(a);case 0:var r={};return avalon.each(this[0].attributes,function(t,a){a&&(e=a.name,e.indexOf("data-")||(e=avalon.camelize(e.slice(5)),r[e]=n(a.value)))}),r}},avalon.root.dataset&&(avalon.fn.data=function(e,t){e=e&&avalon.camelize(e);var a=this[0].dataset;switch(arguments.length){case 2:return a[e]=t,this;case 1:return t=a[e],n(t);case 0:var r={};for(e in a)r[e]=n(a[e]);return r}})},,function(e,t,n){function a(e,t,n){var r=e.getAttribute("avalon-events");if(r&&(e.disabled!==!0||"click"!==t)){for(var o,i=[],s=r.match(f)||[],l=0;o=s[l++];){var c=o.split(":");if(c[0]!==t)break;i.push(c[1])}i.length&&n.push({elem:e,uuids:i})}e=e.parentNode,e&&e.getAttribute&&p[t]&&a(e,t,n)}function r(e){e=new i(e);var t=e.type,n=e.target,r=[];a(n,t,r);for(var o,s,l,c=0;(l=r[c++])&&!e.cancelBubble;)for(e.currentTarget=l.elem,o=0;(s=l.uuids[o++])&&!e.isImmediatePropagationStopped;){var u=avalon.eventListeners[s];if(u){var p=n.__av_context__;if(p&&p.$hashcode===!1)return avalon.unbind(n,t,u);if(/move|scroll/.test(t)){var v=+new Date;v-d>16&&(u.call(n,e,p),d=v)}else u.call(l.elem,e,p)}}}function o(e){var t=c.getAttribute("delegate-events")||"";if(-1===t.indexOf(e)){var n=t.match(f)||[];n.push(e),c.setAttribute("delegate-events",n.join("??")),h(c,e,r)}}function i(e){if(e.originalEvent)return this;for(var t in e)g.test(t)||"function"==typeof e[t]||(this[t]=e[t]);this.timeStamp=new Date-0,this.originalEvent=e}var s=avalon.document,l=avalon.window,c=avalon.root,u=n(1).getShortID,p=n(18),v=avalon.eventHooks;avalon.bind=function(e,t,n){if(1===e.nodeType){var a=e.getAttribute("avalon-events")||"",i=u(n),s=t+":"+i,l=v[t];l&&(t=l.type,l.fix&&(n=l.fix(e,n),n.uuid=i+"0"),s=t+":"+n.uuid),avalon.eventListeners[n.uuid]=n,-1===a.indexOf(t+":")&&(p[t]?o(t):h(e,t,r));var c=a.split("??");""===c[0]&&c.shift(),-1===c.indexOf(s)&&(c.push(s),e.setAttribute("avalon-events",c.join("??")))}else h(e,t,n);return n},avalon.unbind=function(e,t,n){if(1===e.nodeType){var a=e.getAttribute("avalon-events")||"";switch(arguments.length){case 1:m(e,t,r),e.removeAttribute("avalon-events");break;case 2:a=a.split("??").filter(function(e){return-1===e.indexOf(t+":")}).join("??"),e.setAttribute("avalon-events",a);break;case 3:var o=t+":"+n.uuid;a=a.split("??").filter(function(e){return e!==o}).join("??"),e.setAttribute("avalon-events",a),delete avalon.eventListeners[n.uuid]}}else m(e,t,n)};var f=/[^\s\?]+/g,d=+new Date,h=function(e,t,n){e.addEventListener(t,n)},m=function(e,t,n){e.removeEventListener(t,n)},g=/^(?:ms|webkit|moz)/;i.prototype={preventDefault:function(){var e=this.originalEvent;this.returnValue=!1,e&&(e.returnValue=!1,e.preventDefault())},stopPropagation:function(){var e=this.originalEvent;this.cancelBubble=!0,e&&(e.cancelBubble=!0,e.stopPropagation())},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=!0,e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},avalon.fireDom=function(e,t,n){var a=s.createEvent("Events");a.initEvent(t,!0,!0),avalon.mix(a,n),e.dispatchEvent(a)};var v=avalon.eventHooks;"onmouseenter"in c||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v[e]={type:t,fn:function(t,n){return function(a){var r=a.relatedTarget;return r&&(r===t||16&t.compareDocumentPosition(r))?void 0:(delete a.type,a.type=e,n.call(t,a))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){l[e]&&!v.animationend&&(v.animationend={type:t})}),void 0===s.onmousewheel&&(v.mousewheel={type:"wheel",fn:function(e,t){return function(n){n.wheelDeltaY=n.wheelDelta=n.deltaY>0?-120:120,n.wheelDeltaX=0,Object.defineProperty(n,"type",{value:"mousewheel"}),t.call(e,n)}}}),avalon.fn.bind=function(e,t,n){return this[0]?avalon.bind(this[0],e,t,n):void 0},avalon.fn.unbind=function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this}},,,,function(e,t,n){var a=n(2),r=n(19),o=new function(){avalon.mix(this,{option:document.createElement("select"),thead:document.createElement("table"),td:document.createElement("tr"),area:document.createElement("map"),tr:document.createElement("tbody"),col:document.createElement("colgroup"),legend:document.createElement("fieldset"),_default:document.createElement("div"),g:document.createElementNS("http://www.w3.org/2000/svg","svg")}),this.optgroup=this.option,this.tbody=this.tfoot=this.colgroup=this.caption=this.thead,this.th=this.td},i={g:o.g};String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(avalon.rword,function(e){i[e]=o.g});var s,l=/<([\w:]+)/,c=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=/<|&#?\w+;/,p=new a(128),v=avalon.document.createElement("template");/HTMLTemplateElement/.test(v)?s=v:avalon.mix(o,i),avalon.parseHTML=function(e){var t,n=avalon.avalonFragment.cloneNode(!1);if("string"!=typeof e)return n;if(!u.test(e))return n.appendChild(document.createTextNode(e)),n;e=e.replace(c,"<$1></$2>").trim();var a=p.get(e);if(a)return a.cloneNode(!0);var t,v=(l.exec(e)||["",""])[1].toLowerCase(),f=i[v];for(f?(f.innerHTML=e,r(f)):s?(s.innerHTML=e,f=s.content):(f=o[v]||o._default,f.innerHTML=e,r(f));t=f.firstChild;)n.appendChild(t);return a.put(e,n.cloneNode(!0)),n},avalon.innerHTML=function(e,t){var n=this.parseHTML(t);this.clearHTML(e).appendChild(n)},avalon.clearHTML=function(e){for(avalon.each(e.getElementsByTagName("*"),function(e,t){avalon.unbind(t)}),e.textContent="";e.lastChild;)e.removeChild(e.lastChild);return e}},function(e,t,n){n(73),n(57),n(62),n(60),n(75),n(68),n(64),n(71),e.exports=avalon},,function(e,t,n){var a,r=n(20),o=avalon.document,i=avalon.window,s=[],l=function(e){for(a=!0;e=s.shift();)e(avalon)};"complete"===o.readyState?setTimeout(l):o.addEventListener("DOMContentLoaded",l),avalon.bind(i,"load",l),avalon.ready=function(e){a?e(avalon):s.push(e)},avalon.ready(function(){r(o.body)})},,function(e,t){function n(){return(new XMLSerializer).serializeToString(this)}function a(e,t){if(e&&e.childNodes)for(var n,o=e.childNodes,i=0;n=o[i++];)if(1===n.nodeType){var s=document.createElementNS(r,n.nodeName.toLowerCase());avalon.each(n.attributes,function(e,t){s.setAttribute(t.name,t.value)}),a(n,s),t.appendChild(s)}else t.appendChild(n.cloneNode(!0))}avalon.document.contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))}),avalon.contains=function(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(n){return!1}};var r="http://www.w3.org/2000/svg",o=avalon.document.createElementNS(r,"svg");o.innerHTML='<circle fill="red" />',/^\[object SVG\w*Element\]$/.test(o.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:n,set:function(e){var t=this.tagName.toLowerCase(),n=this.parent,r=avalon.parseHTML(e);if("svg"===t)n.insertBefore(r,this);else{var o=document.createDocumentFragment();a(r,o),n.insertBefore(o,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);a(t,this)}}}})},,function(e,t){function n(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}var a={"select:get":function r(e,t,n,o){var i,s=e.children,l=a["option:get"];n=t?n:e.selectedIndex,o=t?o:"select-one"===e.type||0>n,t=t||[];for(var c,u=0;c=s[u++];)if(!c.disabled)switch(c.nodeName.toLowerCase()){case"option":if(c.selected||c.index===n){if(i=l(c),o)return i;t.push(i)}break;case"optgroup":if(i=r(c,t,n,o),"string"==typeof i)return i}return o?null:t},"select:set":function(e,t,n){t=[].concat(t);for(var a,r=0;a=e.options[r++];)(a.selected=t.indexOf(a.value)>-1)&&(n=!0);n||(e.selectedIndex=-1)}};avalon.fn.val=function(e){var t=this[0];if(t&&1===t.nodeType){var r=0===arguments.length,o=r?":get":":set",i=a[n(t)+o];if(i)var s=i(t,e);else{if(r)return(t.value||"").replace(/\r/g,"");t.value=e}}return r?s:this}},,,,function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.length,n=a.call(e);if(o.test(n))return!0;if("[object Object]"===n&&t===t>>>0)return!0}return!1}var a=avalon.inspect,r=/^\[object (?:Window|DOMWindow|global)\]$/,o=/(Array|List|Collection|Map|Arguments)\]$/;avalon.quote=JSON.stringify;var i={};"Boolean Number String Function Array Date RegExp Object Error".replace(avalon.rword,function(e){i["[object "+e+"]"]=e.toLowerCase()}),avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?i[a.call(e)]||"object":typeof e},avalon.isFunction=function(e){return"function"==typeof e},avalon.isWindow=function(e){return r.test(a.call(e))},avalon.isPlainObject=function(e){return"[object Object]"===a.call(e)&&Object.getPrototypeOf(e)===Object.prototype};var s=[].slice;avalon.slice=function(e,t,n){return s.call(e,t,n)},avalon.mix=avalon.fn.mix=function(){var e,t,n,a,r,o,i=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[1]||{},s++),"object"!=typeof i&&"function"!=typeof i&&(i={}),s===l&&(i=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e){n=i[t];try{a=e[t]}catch(u){continue}i!==a&&(c&&a&&(avalon.isPlainObject(a)||(r=Array.isArray(a)))?(r?(r=!1,o=n&&Array.isArray(n)?n:[]):o=n&&avalon.isPlainObject(n)?n:{},i[t]=avalon.mix(c,o,a)):void 0!==a&&(i[t]=a))}return i},avalon.each=function(e,t){if(e){var a=0;if(n(e))for(var r=e.length;r>a&&t(a,e[a])!==!1;a++);else for(a in e)if(e.hasOwnProperty(a)&&t(a,e[a])===!1)break}},e.exports={avalon:avalon,isArrayLike:n}},function(e,t,n){var a=n(30),r=n(28);a.mix(a,r),n(79),n(1),n(29),e.exports=a},,function(e,t,n){function a(){}function r(e,t,n){var r={};e.$skipArray&&(r=avalon.oneObject(e.$skipArray),delete e.$skipArray);var o={};n=n||{};var i={},s=y("$"),l=n.pathname||"";n.id=n.id||s,n.hashcode=s;var c,u,v;for(c in e)if(!f[c]){var g=o[c]=e[c];p(c,g,r)||(u=n.id+"."+c,v=l?l+"."+c:c,i[c]=d(u,v,t))}i.$model=m;var x=new a;Object.defineProperties(x,i);for(c in o)x[c]=o[c],c in r?delete o[c]:o[c]=!0;return h(x,t,o,i,n),x}function o(e,t,n,a){var r,o,i,s={},l={},c=a.pathname;for(r in t)if(!f[r]&&(s[r]=t[r],!p(r,t[r],{}))){var u=Object.getOwnPropertyDescriptor(e,r);u&&u.get?l[r]=u:(o=a.id+"."+r,i=c?c+"."+r:r,l[r]=makeObservable(o,i,n))}for(r in e)delete e[r];l.$model=m;var v=e;Object.defineProperties(v,l);for(r in s)l[r]||(v[r]=s[r]),s[r]=!0;return h(v,a,n,s,l),v}function i(e,t,n){var r={},o={};for(var i in e){r[i]=e[i];var s=Object.getOwnPropertyDescriptor(e,i);s.set&&(o[i]=s)}for(var i in t){r[i]=t[i];var s=Object.getOwnPropertyDescriptor(t,i);s.set&&(o[i]=s)}var l=new a;Object.defineProperties(l,o);for(i in r)o[i]||(l[i]=r[i]),r[i]=!0;return makeObserve(l,n||{},r,o,{id:e.$id,hashcode:y("$"),master:!0}),l}function s(e,t,n,a){if(t&&t.splice){var r=[0,t.length].concat(e);return t.splice.apply(t,r),t}for(var o in x)e[o]=x[o];e.notify=function(e,t,r,o){var i=n.__vmodel__;if(i){var s=null===e||void 0===e?a.pathname:a.pathname+"."+e;i.$fire(s,t,r),o||(avalon.rerenderStart=new Date,avalon.batch(i.$id,!0))}};var i=y("$");a.array=!0,a.hashcode=i,a.id=a.id||i,h(e,a,n);for(var s={id:e.$id+".*",master:!0},l=0,u=e.length;u>l;l++)e[l]=c(e[l],{},s);return e}function l(e,t){e.length!==t&&e.notify("length",e.length,t,!0)}function c(e,t,n){return Object(e)===e?g(e,0,t,n):e}var u=n(85),p=u.isSkip,v=u.$$midway,f=u.$$skipArray;delete f.$accessors;var d=u.makeAccessor,h=u.makeObserver,m=u.modelAccessor,g=u.modelAdaptor,y=avalon.makeHashCode;v.masterFactory=r,v.slaveFactory=o,v.mediatorFactory=avalon.mediatorFactory=i;var x=u.__array__;v.arrayFactory=s;var b=Array.prototype,_=b.splice;x.removeAll=function(e){var t=this.length;if(Array.isArray(e))for(var n=this.length-1;n>=0;n--)-1!==e.indexOf(this[n])&&_.call(this,n,1);else if("function"==typeof e)for(n=this.length-1;n>=0;n--){var a=this[n];e(a,n)&&_.call(this,n,1)}else _.call(this,0,this.length);l(this,t),this.notify()};var w=["push","pop","shift","unshift","splice"];w.forEach(function(e){var t=b[e];x[e]=function(n,a){var r=[],o=this.length,i={idname:this.$id+".*",master:!0};if("splice"===e&&Object(this[0])===this[0])for(var s=this.slice(n,a),u=b.slice.call(arguments,2),r=[n,a],p=0,v=u.length;v>p;p++){var f=s[p];r[p+2]=g(u[p],f,f&&f.$events,i)}else for(var d=0,h=arguments.length;h>d;d++)r[d]=c(arguments[d],{},i);var m=t.apply(this,r);return l(this,o),this.notify(),m}}),"sort,reverse".replace(avalon.rword,function(e){x[e]=function(){return b[e].apply(this,arguments),this.notify(),this}}),e.exports=avalon},,,function(e,t,n){function a(e){var t=avalon.type(e);
if("array"===t){for(var n=[],r=0;r<e.length;r++)n[r]=a(e[r]);return n}if("object"===t){var o={};for(r in e)if("__proxy__"!==r&&"__data__"!==r&&"__const__"!==r&&e.hasOwnProperty(r)){var i=e[r];o[r]=i&&i.nodeType?i:a(i)}return o}return e}function r(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0})}function o(e,t,n,a,o){function i(e){return n[e]===!0}o.array?r(e,"$model",l):r(e,"hasOwnProperty",i),r(e,"$id",o.id),r(e,"$hashcode",o.hashcode),o.master===!0&&(r(e,"$element",null),r(e,"$render",avalon.noop),s(e,t))}var i=n(44),s=i.makeFire,l={get:function(){return a(this)},set:avalon.noop,enumerable:!1,configurable:!0};i.$$midway.hideProperty=r;var c={toJson:a,makeObserver:o,modelAccessor:l};for(var u in i)c[u]=i[u];e.exports=c}])});