<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <script src="avalon.js"></script>
        <script>
            var vm = avalon.define({
                $id: 'test',
                obj:{
                    aaa: {
                        a:1,b:2
                    },
                    bbb: {
                        a:3,b:4
                    }
                },
//                obj: {
//                    aaa: 11,
//                    bbb: 22,
//                    ccc: 33
//                },
                //  list: [{a:1},{a:2},{a:3}],
                onMark: function () {
                    avalon.each(document.querySelectorAll("li"), function (i, el) {
                        el.title = el.textContent
                    })
                },
                change: function () {
                    vm.obj.aaa = 3
                    setTimeout(function () {
                        vm.obj = {
                            bb: 456,
                            a: 1111,
                            b: 1234
                        }
                    }, 1500)

                    //  vm.array.set(0,88)
                    //  vm.array.push("e")
                    //  vm.list[0].a = 999
                }
            })
//            vm.$watch("array.length", function (a, b, k) {
//                console.log(a, b, k)
//            })
//            vm.$watch("array.*", function (a, b, k) {
//                console.log(a, b, k)
//            })

        </script>
    </head>
    <body ms-controller="test">
        <button type="button" ms-click="change">change</button>
        <p><button type="button" ms-click="onMark">mark</button></p>
        <ul>
            <li ms-repeat="obj">
                <p ms-repeat="k in $val">{{k}}</p>
            </li>
        </ul>
    </body>
</html>
