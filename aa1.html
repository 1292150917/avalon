<!DOCTYPE html>
<html lang="en">  
    <head>  
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>司徒正美 通过JS修改属性时触发DOM回调</title>    
        <script src="avalon.js"></script>
        <script>
            console.log = function(str) {
                avalon.ready(function() {
                    var div = document.createElement("pre");
                    div.className = "mass_sys_log";
                    div.innerHTML = str + ""; //确保为字符串
                    document.body.appendChild(div);
                });
            }
            var model = avalon.define("xxx", function(vm) {
                vm.ddd = "aaa"
                vm.$watch("ddd", function(v) {
                    console.log(v+"$watch")
                })
            })
            setInterval(function() {
                aaa.value = new Date - 0
            }, 1000)

        </script>
    </head>  
    <body ms-controller="xxx">  
        <input type="text"  ms-duplex="ddd"  id="aaa" value="xx"/>
    </body>  
</html> 