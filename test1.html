<!DOCTYPE html>
<html>
    <head>
        <title>avalon入门</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="avalon.js" ></script>
        <!--        <script src="mobile.js" ></script>-->
        <script>

            var model = avalon.define({
                $id: "test",
                aaa: "xxx",
                click: function(e) {
                    console.log("-------------")
                    console.log(this)
                },
                dblclick: function(e) {
                    console.log(e.type)
                }
            })
            model.$watch("aaa", function(a) {
                console.log(a)
            })

            window.onload = function() {
                var elem = document.querySelector("#son")
                var offset = function(el) {
                    var left = -el.offsetLeft,
                            top = -el.offsetTop;

                    // jshint -W084
                    while (el = el.offsetParent) {
                        left -= el.offsetLeft;
                        top -= el.offsetTop;
                    }
                    // jshint +W084

                    return {
                        left: left,
                        top: top
                    };
                };

                elem.addEventListener("DOMNodeRemovedFromDocument", function() {
                    setTimeout(function() {
                        console.log(document.documentElement.contains(elem))
                        console.log("ddd")
                    },4)

                })
                setTimeout(function() {
                    //   elem.value = "dddddddddddddddd"
                }, 3000)
                setTimeout(function() {
                    var el = document.querySelector("#parent")
                    el.parentNode.removeChild(el)

                }, 3000)

            }


        </script>
    </head>
    <body>
        <style>
            .ms-click-active{
                color: red
            }
            #parent{
                position: absolute;
                top:200px;
                left:200px;
            }
            #son {
                position: absolute;
                top:200px;
                left:200px;
            }
        </style>
        <div ms-controller="test">
            <div  id="parent" >
                <input id="son"  value="ddd"/>ddd   
            </div


            <label for="female" ms-click="click">Female</label>
            <input type="radio" name="sex" id="female" ms-click="click" />
            <p type="button"  ms-click="click" ms-on-dblclick="dblclick">sss</p>
            <input disabled="disabled" ms-click="click" value="这是disabled元素">
        </div>
    </body>
</html>
