!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.avalon=t():e.avalon=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(83);n(26),n(4),n(65),n(52),n(35),n(88),e.exports=r},function(e,t){var n={},r=/([a-z\d])([A-Z]+)/g,a=/[-_][^-_]/g,o=/\d\.\d{4}/,i=/[-.*+?^${}()|[\]\/\\]/g;avalon.mix({caches:{},vmodels:{},filters:{},components:{},directives:{},eventHooks:{},eventListeners:{},cssHooks:n,parsers:{number:function(e){return""===e?"":parseFloat(e)||0},string:function(e){return null===e||void 0===e?"":e+""},"boolean":function(e){return"true"===e}},version:2,css:function(e,t,r,a){e instanceof avalon&&(e=e[0]);var o=avalon.camelize(t);if(t=avalon.cssName(o)||o,void 0===r||"boolean"==typeof r){a=n[o+":get"]||n["@:get"],"background"===t&&(t="backgroundColor");var i=a(e,t);return r===!0?parseFloat(i)||0:i}if(""===r)e.style[t]="";else{if(null==r||r!==r)return;isFinite(r)&&!avalon.cssNumber[o]&&(r+="px"),a=n[o+":set"]||n["@:set"],a(e,t,r)}},directive:function(e,t){return this.directives[e]=t},isObject:function(e){return null!==e&&"object"==typeof e},range:function(e,t,n){n||(n=1),null==t&&(t=e||0,e=0);for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e,e+=n;return o},hyphen:function(e){return e.replace(r,"$1-$2").toLowerCase()},camelize:function(e){return!e||e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(a,function(e){return e.charAt(1).toUpperCase()})},makeHashCode:function(e){return e=e||"avalon",String(Math.random()+Math.random()).replace(o,e)},escapeRegExp:function(e){return(e+"").replace(i,"\\$&")},Array:{merge:function(e,t){e.push.apply(e,t)},ensure:function(e,t){return-1===e.indexOf(t)?e.push(t):void 0},removeAt:function(e,t){return!!e.splice(t,1).length},remove:function(e,t){var n=e.indexOf(t);return~n?avalon.Array.removeAt(e,n):!1}}});var l=1;e.exports={avalon:avalon,getLongID:function(e){return e.uuid||(e.uuid=avalon.makeHashCode("e"))},getShortID:function(e){return e.uuid||(e.uuid="_"+ ++l)}}},function(e,t){function n(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap={}}var r=n.prototype;r.put=function(e,t){var n={key:e,value:t};return this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit?this.shift():this.size++,t},r.shift=function(){var e=this.head;e&&(this.head=this.head.newer,this.head.older=e.newer=e.older=this._keymap[e.key]=void 0,delete this._keymap[e.key])},r.get=function(e){var t=this._keymap[e];if(void 0!==t)return t===this.tail?t.value:(t.newer&&(t===this.head&&(this.head=t.newer),t.newer.older=t.older),t.older&&(t.older.newer=t.newer),t.newer=void 0,t.older=this.tail,this.tail&&(this.tail.newer=t),this.tail=t,t.value)},e.exports=n},function(e,t){function n(e,t,a){var o=e[0];if(o||a){a=a||o.parentNode;for(var i=0,l=t.length;l>i;i++){var s=t[i],c=o;if(c&&(o=c.nextSibling),"for"===s.directive&&s.change){if(1===c.nodeType){var u=document.createComment(s.nodeValue);a.insertBefore(u,c),a.insertBefore(document.createComment("a-for-end:"),c.nextSibling),c=u}var p=[c],v=c;e:for(;v&&(v=v.nextSibling);)if(p.push(v),0===(v.nodeValue||"").indexOf("a-for-end:")){o=v.nextSibling;break e}s.repeatNodes=p}!1!==r(c,s,a,"change")?(!s.skipContent&&s.children&&c&&1===c.nodeType&&n(avalon.slice(c.childNodes),s.children,c),r(c,s,a,"afterChange")):r(c,s,a,"afterChange")}}}function r(e,t,n,r){var a=t[r];if(a){for(var o;o=a.shift();)if(!1===o(e,t,n))return!1;delete t[r]}}e.exports=n},function(e,t,n){var r=n(45),a=n(44),o=n(42),i=n(43);avalon.vdomAdaptor=function(e){switch(e.type){case"#text":return new r(e);case"#comment":return new o(e);case"#component":return new i(e);default:return new a(e)}},e.exports={VText:r,VComment:o,VElement:a,VComponent:i}},function(e,t){e.exports=avalon.oneObject("$id,$render,$element,$watch,$fire,$events,$model,$skipArray,$accessors,$hashcode")},function(e,t,n){function r(e){var t=e.target;avalon(t).addClass(t.getAttribute(s[e.type])||"")}function a(e){var t=e.target,n=s[e.type];avalon(t).removeClass(t.getAttribute(n)||""),"change-active"!==n&&avalon(t).removeClass(t.getAttribute("change-active")||"")}function o(e,t){var n=e.getAttribute("old-change-class")||"",r=t["change-class"];avalon(e).removeClass(n).addClass(r),e.setAttribute("old-change-class",r),delete t["change-class"]}var i=n(1).getLongID,l=avalon.directives;avalon.directive("class",{parse:function(e,t){return"vnode"+t+'.props["'+e.name+'"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t,n){var o=e.props["a-"+n],i=t.props["a-"+n];if(t.classEvent)e.classEvent=t.classEvent;else{var l={};"hover"===n?(l.mouseenter=r,l.mouseleave=a):"active"===n&&(e.props.tabindex=e.props.tabindex||-1,l.tabIndex=e.props.tabindex,l.mousedown=r,l.mouseup=a,l.mouseleave=a),e.classEvent=l}var s;if(Array.isArray(o)?s=o.join(" ").trim().replace(/\s+/," "):"object"==typeof o?s=Object.keys(o).filter(function(e){return o[e]}).join(" "):"string"==typeof o&&(s=o.trim().replace(/\s+/," ")),"string"!=typeof s)return void(e.props["a-"+n]=i);if(!i||i!==s){e["change-"+n]=s;var c=e.change||(e.change=[]);avalon.Array.ensure(c,this.update)}},update:function(e,t){var n=t.classEvent;if(n){for(var r in n)"tabIndex"===r?e[r]=n[r]:avalon.bind(e,r,n[r]);t.classEvent={}}var a=["class","hover","active"];a.forEach(function(n){var r="change-"+n,a=t[r];if(a)if("class"===n)o(e,t);else{var i=e.getAttribute(r);i&&avalon(e).removeClass(i),e.setAttribute(r,a)}})}}),l.active=l.hover=l["class"];var s={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"};i(r),i(a)},function(e,t){avalon.directive("controller",{priority:1,parse:function(e,t){var n="vm"+t,r=/\{.+\}/.test(e.expr),a="\n\n\nvar "+n+" =  avalon.vmodels["+avalon.quote(e.expr)+"]\n",o="\n\n\nvar "+n+" = "+e.expr+"\n",i=(r?o:a)+"if("+n+"){\n	if(__vmodel__){\n		__vmodel__ = avalon.mediatorFactory(__vmodel__, "+n+")\n	}else{\n		__vmodel__ = "+n+"\n	}\n}\n\n\n";return i},diff:avalon.noop,update:avalon.noop})},function(e,t){avalon.directive("css",{parse:function(e,t){return"vnode"+t+'.props["a-css"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-css"],r=t.props["a-css"];if(Object(n)===n){if(Array.isArray(n)&&(n=e.props["a-css"]=avalon.mix.apply({},n)),"object"!=typeof r)e.changeStyle=n;else{var a={},o=!1;for(var i in n)n[i]!==r[i]&&(o=!0,a[i]=n[i]);o&&(e.changeStyle=a)}if(e.changeStyle){var l=e.change||(e.change=[]);avalon.Array.ensure(l,this.update)}}else e.props["a-css"]=r},update:function(e,t){var n=t.changeStyle,r=avalon(e);for(var a in n)r.css(a,n[a]);delete t.changeStyle}})},function(e,t){var n={input:function(){var e=this,t=e.parse(e.elem.value);t!==e.modelValue&&e.set(e.vmodel,t)},radio:function(){var e=this;if(e.isChecked){var t=e.modelValue=!e.modelValue;e.set(e.vmodel,t)}else n.input.call(e)},checkbox:function(){var e=this,t=e.modelValue;Array.isArray(t)||(avalon.warn("ms-duplex应用于checkbox上要对应一个数组"),t=[t]);var n=e.elem.checked?"ensure":"remove";if(t[n]){var r=e.parse(e.elem.value);t[n](r)}},select:function(){var e=this,t=avalon(e.elem).val();t+""!=this.modelValue+""&&(t=Array.isArray(t)?t.map(function(t){return e.parse(t)}):e.parse(t),e.modelValue=t,e.set(e.vmodel,t))},contenteditable:function(){var e=this,t=e.parse(e.elem.innerHTML);t!==e.modelValue&&(e.modelValue=t,e.set(e.vmodel,t))}};e.exports=n},function(e,t){function n(e){a[this.tagName].call(this,e),!this.msFocus&&this.valueHijack&&this.valueHijack()}var r=!1;try{var a={},o=HTMLInputElement.prototype,i=HTMLTextAreaElement.prototype,l=HTMLInputElement.prototype;Object.getOwnPropertyNames(l),a.INPUT=Object.getOwnPropertyDescriptor(o,"value").set,Object.defineProperty(o,"value",{set:n}),a.TEXTAREA=Object.getOwnPropertyDescriptor(i,"value").set,Object.defineProperty(i,"value",{set:n}),r=!0}catch(s){}e.exports=r},function(e,t){avalon.directive("expr",{parse:function(){},diff:function(e,t){if(e.nodeValue!==t.nodeValue){var n=e.change||(e.change=[]);avalon.Array.ensure(n,this.update)}},update:function(e,t,n){3!==e.nodeType?n.replaceChild(avalon.vdomAdaptor(t).toDOM(),e):e.nodeValue=t.nodeValue}})},function(e,t,n){function r(e,t){return e.children.forEach(function(e){t.appendChild(avalon.vdomAdaptor(e).toDOM())}),t}function a(e,t){for(var n,r=[],a={children:[]},o=0;n=e[o];o++)"#comment"===n.type&&n.nodeValue===t?(a.children.push(n),a.key=n.key,a.index=r.length,r.push(a),a={children:[]}):a.children.push(n);return r}function o(e,t){for(var n,r=e[t],a=r.signature+":end",o=[];(n=e[t++])&&(o.push(n),n.nodeValue!==a););return o}function i(e,t){for(var n,r=0,a=[];(n=e[t++])&&("#comment"===n.type&&(0===n.nodeValue.indexOf("a-for:")?r++:0===n.nodeValue.indexOf("a-for-end:")&&r--),a.push(n),0!==r););return a}function l(e,t){var n=e[t];if(n){for(var r=[{id:t,c:n}];;){if(t+="_",!e[t])break;r.push({id:t,c:e[t]})}var a=r.pop();return delete e[a.id],a.c}return n}function s(e,t){var n=t.key;if(e[n]){for(;;)if(n+="_",!e[n]){e[n]=t;break}}else e[n]=t}var c=n(3);avalon._each=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n],a=typeof r,o=r&&"object"===a?e.$hashcode:a+r;t(n,e[n],o)}else for(var n in e)e.hasOwnProperty(n)&&t(n,e[n],n)};var u=/a-for\:\s*/,p=/^\s*\(\s*/,v=/\s*\)\s*$/,f=/\s*,\s*/;avalon.directive("for",{parse:function(e,t){var n=e.replace(u,"").split(" in "),r="var loop"+t+" = "+avalon.parseExpr(n[1])+"\n",a=n[0].replace(p,"").replace(v,"").split(f);return 1===a.length&&a.unshift("$key"),r+"avalon._each(loop"+t+", function("+a+",traceKey){\n\n"},diff:function(e,t,n){var r=e[n],c=t[n]||{},u="directive"in r,p="directive"in c,v=u?o(e,n):i(e,n),f=c.repeatVnodes;f||(f=p?o(t,n):i(t,n));var d=v.length-f.length;if(d>0){for(var h=[n,0],m=0;d>m;m++)h.push(null);t.splice.apply(t,h)}else t.splice.apply(t,[n,Math.abs(d)]);r.action=p?"reorder":"replace",r.repeatVnodes=v;var g=r.components=a(v.slice(1,-1),r.signature);if("reorder"===r.action){for(var y,b={},x={},n=0;y=g[n++];)s(b,y);for(var y,w=c.components,n=0;y=w[n++];){var _=l(b,y.key);_&&(x[y.index]=_.index,avalon.diff(_.children,y.children))}for(var n in b)_=b[n],x[_.index+"_"]=_,avalon.diff(_.children,[]);r.indexes=x}var A=r.change||(r.change=[]);return avalon.Array.ensure(A,this.update),n+v.length-1},update:function(e,t,n){var a=t.repeatVnodes,o=t.repeatNodes,i=t.action,l=o[o.length-1],s=a.slice(1,-1);if("replace"===i){for(var u=e.nextSibling;u!==l;)n.removeChild(u),u=e.nextSibling;var p=document.createDocumentFragment();s.forEach(function(e){p.appendChild(avalon.vdomAdaptor(e).toDOM())});var v=avalon.slice(p.childNodes);avalon.diff(s,[]),n.insertBefore(p,l),c(v,s,n)}else{for(var f,d,h=t.signature,m=t.indexes,g=document.createDocumentFragment(),p=g.cloneNode(!1),y={},b=[],x=0;(f=e.nextSibling)&&f!==l;)f.nodeValue===h?(p.appendChild(f),void 0!==m[x]?(y[m[x]]=p,delete m[x]):b.push(p),x++,p=g.cloneNode(!1)):p.appendChild(f);for(x in m){var w=m[x];x=parseFloat(x),y[x]=r(w,g.cloneNode(!1))}for(x=0,d;d=y[x++];)g.appendChild(d);var v=avalon.slice(g.childNodes);n.insertBefore(g,l),c(v,s,n)}}})},function(e,t,n){var r=n(2),a=new r(128);avalon.textCache=a,avalon.directive("html",{parse:function(e,t){return"vnode"+t+".htmlVm = __vmodel__\nvnode"+t+".props.wid = 1;\nvnode"+t+'.props["a-html"] ='+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-html"],r=t.props["a-html"];if(n!==r){var o=a.get(n);if(!Array.isArray(o)){var i=avalon.lexer(n),l=avalon.render(i);o=l(e.htmlVm),n=e.props["a-html"]=o.map(function(e){return"template"in e?e.template:e.nodeValue}).join("-"),a.put(n,o)}if(e.children=o,e.props["a-html"]!==r){var s=e.change||(e.change=[]);avalon.Array.ensure(s,this.update)}}},update:function(e,t){if(e.querySelectorAll){var n=e.querySelectorAll("[avalon-events]");avalon.each(n,function(e){avalon.unbind(e)})}else{var n=e.getElementsByTagName("*");avalon.each(n,function(e){e.getAttribute("avalon-events")&&avalon.unbind(e)})}if(window.Range)e.innerHTML=t.children.map(function(e){return avalon.vdomAdaptor(e).toHTML()}).join("");else{avalon.clearHTML(e);var r=document.createDocumentFragment();t.children.forEach(function(e){r.appendChild(avalon.vdomAdaptor(e).toDOM())}),e.appendChild(r)}}})},function(e,t,n){var r=n(3);avalon.directive("if",{priority:5,parse:function(e,t){return"vnode"+t+".props['a-if'] = "+avalon.quote(e.expr)+";\n"},diff:function(e,t){if(e.type!==t.type){var n=e.change||(e.change=[]);avalon.Array.ensure(n,this.update)}},update:function(e,t,n){var a=e.nodeName.toLowerCase(),o=t.type;if(a!==o)if(1===e.nodeType)avalon.caches[t.nodeValue]=e,n.replaceChild(avalon.vdomAdaptor(t).toDOM(),e);else{var i=e.signature||e.nodeValue,l=avalon.caches[i];if(l)n.replaceChild(l,e),r([l],[t]);else{var s=avalon.vdomAdaptor(t).toDOM();n.replaceChild(s,e),avalon.caches[i]=s}}}})},function(e,t,n){var r=n(1).getLongID,a=avalon.quote,o=/^a-on-(\w+)/,i=/\|.+/g,l=/([@$]?\w+)/g,s=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g;avalon.directive("on",{priority:3e3,parse:function(e,t){var n=e.expr.replace(s," ").replace(i,"").match(l),o=n.every(function(e){return"@"===e.charAt(0)||"$event"===e}),c="vnode"+t+".onVm = __vmodel__\n",u=a(e.name);if(o){var p=Function("return "+avalon.parseExpr(e,"on"))(),v=r(p);return avalon.eventListeners[v]=p,c+"vnode"+t+".props["+u+"] = avalon.eventListeners."+v+"\n"}return c+"vnode"+t+".props["+u+"] = "+avalon.parseExpr(e,"on")+"\n"},diff:function(e,t,n,a){var i=e.props[a],l=t.props[a];if(i!==l){var s=a.match(o);n=s[1];var c=n+":"+r(i);e.addEvents=e.addEvents||{},e.addEvents[c]=i,"function"==typeof l&&(e.removeEvents=e.removeEvents||{},e.removeEvents[n+":"+l.uuid]=l);var u=e.change||(e.change=[]);avalon.Array.ensure(u,this.update)}},update:function(e,t){var n,r,a;e.__av_context__=t.onVm,delete t.onVm;for(n in t.removeEvents)r=n.split(":").shift(),a=t.removeEvents[n],avalon.unbind(e,r,a);delete t.removeEvents;for(n in t.addEvents)r=n.split(":").shift(),a=t.addEvents[n],avalon.bind(e,r,a);delete t.addEvents}})},function(e,t,n){var r=n(2),a=new r(256),o=avalon.config.rexpr;avalon.directive("text",{parse:function(e,t){return"vnode"+t+".textVm = __vmodel__\nvnode"+t+".props.wid = 2;\nvnode"+t+'.props["a-text"] ='+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-text"],r=t.props["a-text"];if(n!==r){var i=a.get(n);if(!Array.isArray(i)){var l=o.test(n);if(l){var s=[{type:"#text",nodeValue:n}],c=avalon.render(s);i=c(e.textVm),e.props["a-text"]=i[0].nodeValue,a.put(n,i)}else i=[{type:"#text",nodeValue:n}]}if(e.children=i,e.props["a-text"]!==r){var u=e.change||(e.change=[]);avalon.Array.ensure(u,this.update)}}},update:function(e,t){var n=t.props["a-text"];"textContent"in e?e.textContent=n+"":e.innerText=n+""}})},function(e,t){function n(e,t){var r="_"+e;if(!n[r]){var a=document.createElement(e);avalon.root.appendChild(a),t=avalon.modern?getComputedStyle(a,null).display:a.currentStyle.display,avalon.root.removeChild(a),n[r]=t}return n[r]}avalon.parseDisplay=n,avalon.directive("visible",{parse:function(e,t){return"vnode"+t+'.props["a-visible"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-visible"]=!!e.props["a-visible"];if(e.displayValue=t.displayValue,n!==t.props["a-visible"]){var r=e.change||(e.change=[]);avalon.Array.ensure(r,this.update)}},update:function(e,t){if(t.props["a-visible"]){var r=avalon(e).css("display");t.displayValue||(t.displayValue="none"!==r?r:n(e.nodeName)),e.style.display=t.displayValue}else e.style.display="none"}})},function(e,t){var n=["autofocus,autoplay,async,allowTransparency,checked,controls","declare,disabled,defer,defaultChecked,defaultSelected,","isMap,loop,multiple,noHref,noResize,noShade","open,readOnly,selected"].join(","),r={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"};n.replace(/\w+/g,function(e){r[e.toLowerCase()]=e});var a=["accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan","dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight","rowSpan,tabIndex,useMap,vSpace,valueType,vAlign"].join(",");a.replace(/\w+/g,function(e){r[e.toLowerCase()]=e}),e.exports=r},function(e,t){e.exports={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0}},function(e,t){function n(e){var t=e.getElementsByTagName("script");if(t.length)for(var n,o=0;n=t[o++];)if(a[n.type]){var i=r.cloneNode(!1);Array.prototype.forEach.call(n.attributes,function(e){e&&e.specified&&(i[e.name]=e.value,i.setAttribute(e.name,e.value))}),i.text=n.text,n.parentNode.replaceChild(i,n)}}var r=avalon.document.createElement("script"),a=avalon.oneObject(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]);e.exports=n},function(e,t){function n(e){for(var t,r=0;t=e[r++];)if(1===t.nodeType){var a=t.getAttribute("a-controller")||t.getAttribute("ms-controller"),o=avalon.vmodels[a];if(o&&!o.$element){var i=t.outerHTML;avalon(t).removeClass("ms-controller a-controller"),o.$element=t;var l=new Date-0,s=avalon.lexer(i);avalon.log("create primitive vtree",new Date-l),l=new Date,o.$render=avalon.render(s),avalon.log("create template Function ",new Date-l),avalon.rerenderStart=new Date,t.vnode=s,avalon.batch(a,!0)}else a||n(t.childNodes)}}e.exports=avalon.scan=function(e){avalon.warn("[avalon.scan] is inner method that only invokes once!"),e&&e.nodeType&&n([e])}},function(e,t){function n(e,t,n){var r=avalon.type(e);if("array"!==r||"object"!==r)throw"orderBy只能处理对象或数组";var a=n&&0>n?-1:1;if("string"==typeof t){var o=t;t=function(e){return e&&e[o]}}e=s(e),e.forEach(function(e){e.order=t(e.value,e.key)}),e.sort(function(e,t){var n=e.order,r=t.order;return n===r?0:n>r?a:-a});var l="array"===r,c=l?[]:{};return i(c,e,function(e){l?c.push(e.value):c[e.key]=e.value})}function r(e,t){var n=avalon.type(e);if("array"!==n&&"object"!==n)throw"filterBy只能处理对象或数组";var r=avalon.slice(arguments,2);if("function"==typeof t)var a=t;else{if("string"!=typeof t)throw t+"必须是字符串或函数";r.unshift(new RegExp(avalon.escapeRegExp(t),"i")),a=l}e=s(e).filter(function(e){return!!a.apply(e,[e.value].concat(r))});var o="array"===n,c=o?[]:{};return i(c,e,function(e){o?c.push(e.value):c[e.key]=e.value})}function a(e,t){if(avalon.isObject(e)&&!Array.isArray(e)){var n=[];return i(n,t,function(t){n.push(e.hasOwnProperty(t)?e[t]:"")})}throw"selectBy只支持对象"}function o(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):parseInt(t,10),Number.isNaN(t)?e:("number"==typeof e&&(e+=""),Array.isArray(e)||"string"==typeof e?(n=!n||Number.isNaN(n)?0:~~n,n=0>n?Math.max(0,e.length+n):n,e=t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n),i(e,[])):e)}function i(e,t,n){for(var r=0,a=t.length;a>r;r++)n(t[r]);return e}function l(e,t){if(avalon.isPlainObject(e)){for(var n in e)if(t.test(e[n]))return!0}else{if(Array.isArray(e))return e.some(function(e){return t.test(e)});if(null!==e)return t.test(e)}return!1}function s(e){var t=[],n=0;return avalon.each(e,function(e,r){t[n++]={value:r,key:e}}),t}Number.isNaN=Number.isNaN||function(e){return e!==e},e.exports={limitBy:o,orderBy:n,selectBy:a,filterBy:r}},function(e,t){function n(e){return parseInt(e,10)||0}function r(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function a(e,t,n,a){return function(o){var i=o["get"+e]();return(n>0||i>-n)&&(i+=n),0===i&&-12===n&&(i=12),r(i,t,a)}}function o(e,t){return function(n,r){var a=n["get"+e](),o=(t?"SHORT"+e:e).toUpperCase();return r[o][a]}}function i(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=r(Math[t>0?"floor":"ceil"](t/60),2)+r(Math.abs(t%60),2)}function l(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function s(e,t){var r,a,o=s.locate,i="",l=[];if(t=t||"mediumDate",t=o[t]||t,"string"==typeof e)if(/^\d+$/.test(e))e=n(e);else if(p.test(e))e=+RegExp.$1;else{var v=e.trim(),f=[0,0,0,0,0,0,0],d=new Date(0);v=v.replace(/^(\d+)\D(\d+)\D(\d+)/,function(e,t,r,a){var o=4===a.length?[a,t,r]:[t,r,a];return f[0]=n(o[0]),f[1]=n(o[1])-1,f[2]=n(o[2]),""});var h=d.setFullYear,m=d.setHours;v=v.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(e,t,r,a,o){return f[3]=n(t),f[4]=n(r),f[5]=n(a),o&&(f[6]=Math.round(1e3*parseFloat("0."+o))),""});var g=0,y=0;v=v.replace(/Z|([+-])(\d\d):?(\d\d)/,function(e,t,r,a){return h=d.setUTCFullYear,m=d.setUTCHours,t&&(g=n(t+r),y=n(t+a)),""}),f[3]-=g,f[4]-=y,h.apply(d,f.slice(0,3)),m.apply(d,f.slice(3)),e=d}if("number"==typeof e&&(e=new Date(e)),"date"===avalon.type(e)){for(;t;)a=u.exec(t),a?(l=l.concat(a.slice(1)),t=l.pop()):(l.push(t),t=null);return l.forEach(function(t){r=c[t],i+=r?r(e,o):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}var c={yyyy:a("FullYear",4),yy:a("FullYear",2,0,!0),y:a("FullYear",1),MMMM:o("Month"),MMM:o("Month",!0),MM:a("Month",2,1),M:a("Month",1,1),dd:a("Date",2),d:a("Date",1),HH:a("Hours",2),H:a("Hours",1),hh:a("Hours",2,-12),h:a("Hours",1,-12),mm:a("Minutes",2),m:a("Minutes",1),ss:a("Seconds",2),s:a("Seconds",1),sss:a("Milliseconds",3),EEEE:o("Day"),EEE:o("Day",!0),a:l,Z:i},u=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,p=/^\/Date\((\d+)\)\/$/,v={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};v.SHORTMONTH=v.MONTH,s.locate=v,e.exports=s},function(e,t){function n(e){return String(e).replace(/&/g,"&amp;").replace(r,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(a,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/([^\#-~| |!])/g;e.exports=n},function(e,t){var n={stop:function(e){return e.stopPropagation(),e},prevent:function(e){return e.preventDefault(),e}},r={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40};avalon.each(r,function(e,t){n[e]=function(e){return e.which!==t&&(e.$return=!0),e}}),e.exports=n},function(e,t,n){function r(e){return e}var a=n(27),o=n(24),i=n(28),l=n(23),s=n(22),c=n(25),u=avalon.filters;avalon.mix({__read__:function(e){var t=u[e];return t?t.get?t.get:t:r},__write__:function(e){var t=u[e];return t&&t.set||r}}),avalon.mix(u,{uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},truncate:function(e,t,n){return t=t||30,n="string"==typeof n?n:"...",e.length>t?e.slice(0,t-n.length)+n:String(e)},camelize:avalon.camelize,date:l,escape:o,sanitize:i,number:a,currency:function(e,t,n){return(t||"￥")+a(e,isFinite(n)?n:2)}},s,c),e.exports=avalon},function(e,t){function n(e,t,n,r){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):3,i=r||",",l=n||".",s="",c=function(e,t){var n=Math.pow(10,t);return""+(Math.round(e*n)/n).toFixed(t)};return s=(o?c(a,o):""+Math.round(a)).split("."),s[0].length>3&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(s[1]||"").length<o&&(s[1]=s[1]||"",s[1]+=new Array(o-s[1].length+1).join("0")),s.join(l)}e.exports=n},function(e,t){var n=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,r=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,a=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,o={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi};e.exports=function(e){return e.replace(n,"").replace(a,function(e,t){var n=e.toLowerCase().match(/<(\w+)\s/);if(n){var a=o[n[1]];a&&(e=e.replace(a,function(e,t,n){var r=n.charAt(0);return t+"="+r+"javascript:void(0)"+r}))}return e.replace(r," ").replace(/\s+/g," ")})}},function(e,t){(function(t){var n=t,r={window:n,document:{createElement:function(){return{}},createElementNS:function(){return{}},contains:Boolean},root:{outerHTML:"x"},msie:NaN,modern:!0,avalonDiv:null,avalonFragment:null};if(n.window===n){var a=n.document;r.document=a,r.modern=n.dispatchEvent,r.root=a.documentElement,r.avalonDiv=a.createElement("div"),r.avalonFragment=a.createDocumentFragment(),n.VBArray&&(r.msie=a.documentMode||(n.XMLHttpRequest?7:6))}r.nextTick=function(){function e(){for(var e=o.length,t=0;e>t;t++)o[t]();o=o.slice(e)}var t=n.setImmediate,r=n.MutationObserver;if(t)return t.bind(n);var o=[];if(r){var i=a.createTextNode("avalon");new r(e).observe(i,{characterData:!0});var l=!1;return function(e){o.push(e),l=!l,i.data=l}}return function(e){setTimeout(e,4)}}(),e.exports=r}).call(t,function(){return this}())},function(e,t){function n(e){for(var t in e)if(avalon.ohasOwn.call(e,t)){var r=e[t];"function"==typeof n.plugins[t]?n.plugins[t](r):"object"==typeof n[t]?avalon.mix(n[t],r):n[t]=r}return this}avalon.config=n;var r={interpolate:function(e){var t=e[0],r=e[1];if(t===r)throw new SyntaxError("openTag!==closeTag");var a=t+"test"+r,o=avalon.avalonDiv;if(o.innerHTML=a,o.innerHTML!==a&&o.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");o.innerHTML="",n.openTag=t,n.closeTag=r;var i=avalon.escapeRegExp(t),l=avalon.escapeRegExp(r);n.rexpr=new RegExp(i+"([\\ss\\S]*)"+l),n.rexprg=new RegExp(i+"([\\ss\\S]*)"+l,"g"),n.rbind=new RegExp(i+"[\\ss\\S]*"+l+"|\\b(?:ms|a)-")}};n.plugins=r,n.plugins.interpolate(["{{","}}"]),n.debug=!0},function(e,t){(function(t){function n(e){return new n.init(e)}t.avalon=n,n.init=function(e){this[0]=this.element=e},n.fn=n.prototype=n.init.prototype,n.mix=function(e,t){for(var n in t)e[n]=t[n];return e};var r=/[^, ]+/g,a=window.console;n.mix(n,{noop:function(){},rword:r,inspect:{}.toString,ohasOwn:{}.hasOwnProperty,log:function(){a&&n.config.debug&&Function.apply.call(console.log,console,arguments)},warn:function(){if(a&&n.config.debug){var e=console.warn||console.log;Function.apply.call(e,console,arguments)}},error:function(e,t){throw(t||Error)(e)},oneObject:function(e,t){"string"==typeof e&&(e=e.match(r)||[]);for(var n={},a=void 0!==t?t:1,o=0,i=e.length;i>o;o++)n[e[o]]=a;return n}}),e.exports=n}).call(t,function(){return this}())},function(e,t,n){function r(e,t){var n=avalon.vmodels[e];if(document.nodeName&&n&&n.$render&&(i[e]=!0,!l)){var s=n.$element;s&&a(function(){l=!0;var t=n.$render();avalon.diff(t,s.vnode||[]),o([s],t),s.vnode=t,avalon.log("rerender",new Date-avalon.rerenderStart),l=!1,delete i[e];for(var a in i){r(a,!0);break}},t)}}function a(e,t){t?e():avalon.nextTick(e)}var o=n(3),i={},l=!1;e.exports=avalon.batch=r},function(e,t){function n(e,t){for(var a=0;a<e.length;a++){var s=e[a],c=t[a]||l;switch(s.type){case"#text":s.skipContent||o.expr.diff(s,c);break;case"#comment":"for"===s.directive?a=o["for"].diff(e,t,a):"if"===s.directive&&o["if"].diff(s,c);break;default:s.skipAttrs||r(s,c),s.skipContent||n(s.children,c.children||i)}}}function r(e,t){e.change=e.change||[];for(var n in e.props){var r=n.match(a);if(r){var i=r[1];try{o[i]&&o[i].diff(e,t||l,i,n)}catch(s){avalon.log(e,t,s,"diffProps error")}}}}var a=/^(?:ms|a)-(\w+)-?(.*)/,o=avalon.directives,i=[],l={children:[],props:{}};e.exports=n},function(e,t){function n(e,t){var n,r=t.split(".")[0];try{e.hasOwnProperty(r)&&(n=e.$accessors?e.$accessors[r].get.heirloom.__vmodel__:Object.getOwnPropertyDescriptor(e,r).get.heirloom.__vmodel__)}catch(a){avalon.log("adjustVm "+a)}return n||e}function r(e,t){var r=n(this,e),a=r.$events,o=a[e]||(a[e]=[]);return r!==this&&(this.$events[e]=o),avalon.Array.ensure(o,t),function(){avalon.Array.remove(o,t)}}function a(e,t,n,r,o,i){if(e&&e.length)try{for(i=i||e.length-1;i>=0;i--){var l=e[i];l.call(t,r,o,n)}}catch(s){i-1>0&&a(e,t,n,r,o,i-1),avalon.log(s,n)}}e.exports={$emit:a,$watch:r,adjustVm:n}},function(e,t,n){function r(e){var t=t||String(new Date-0).slice(0,6),n=a(e,t)+"\n\nreturn nodes"+t,r=Function("__vmodel__",n);return r}avalon.lexer=n(36),avalon.diff=n(33),avalon.batch=n(32);var a=n(41);avalon.render=r,e.exports=avalon},function(e,t,n){function r(e){var t="??"+O++;return T[t]=e,t}function a(e){var t=T[e];return t}function o(e,t){var n=[];if(t&&!C.test(e))return n;for(t||(e=e.replace(b,r));;){var o="",s=!1,u=e.match(g);if(u&&(o=u[0],s=new f(o.replace(x,a))),!s&&(u=e.match(y),u&&(o=u[0],s=new d(u[1].replace(x,a)),k.test(s.nodeValue)))){var v=n[n.length-1];v&&"#text"===v.type&&_.test(v.nodeValue)&&n.pop()}if(!s&&(u=e.match(h))){o=u[0];var w=u[1].toLowerCase();o=i(o,w),u=o.match(m);var O={};u[2]&&c(u[2],O);var M=o.slice(u[0].length,-1*(w.length+3));s={type:w,props:O,template:M.replace(x,a).trim(),children:[]},s=l(s,M,n)}if(s||(u=e.match(m),u&&(o=u[0],w=u[1].toLowerCase(),O={},u[2]&&c(u[2],O),s={type:w,props:O,template:"",children:[],isVoidTag:!0},l(s,"",n))),!s)break;n.push(s),e=e.slice(o.length),"#comment"===s.type&&A.test(s.nodeValue)&&(s.signature=p("for"),e=e.replace(E,""))}return t||(T={}),n}function i(e,t){var n=[],r=[],a=$[t+"open"]||($[t+"open"]=new RegExp("<"+t+M,"g")),o=$[t+"close"]||($[t+"close"]=new RegExp("</"+t+">","g"));e.replace(a,function(e,t){return n.push(("0000000000"+t+"<").slice(-10)),e.replace(S,"1")}).replace(o,function(e,t){r.push(("0000000000"+t+">").slice(-10))});for(var i=n.concat(r).sort(),l=i.join("").replace(w,""),s=0,c=0,u=0,p=l.length;p>u;u++){var v=l.charAt(u);if("<"===v?s+=1:s-=1,0===s){c=u;break}}var f=parseFloat(i[c])+t.length+3;return e.slice(0,f)}function l(e,t,n){var r=e.type;if(e.props["a-skip"])e.skipContent=!0;else{switch(r){case"style":case"script":case"noscript":case"template":case"textarea":e.skipContent=!0,"textarea"===r&&(e.props.type="textarea");break;case"input":e.props.type||(e.props.type="text");case"xmp":e.children.push(new f(e.template));break;case"option":e.children.push(new f(u(e.template)));break;default:if(!e.isVoidTag){var a=o(t,!0);e.children=a,"table"===r&&s(e.children)}}var i=e.props["ms-for"]||e.props["a-for"];i&&(n.push({type:"#comment",nodeValue:"a-for:"+i,signature:p("for")}),delete e.props["ms-for"],delete e.props["a-for"],n.push(e),e={type:"#comment",nodeValue:"a-for-end:"})}return e}function s(e){for(var t,n=!1,r=0,a=0,o=e.length,i=0;o>i;i++){var l=e[i];t?"tr"!==l.type&&"#"!==l.type.charAt(0)?t=!1:(t.children.push(l),r++,e[i]=0):"tr"===l.type&&(t={type:"tbody",template:"",children:[],props:{}},t.children.push(l),n=!0,0===a&&(a=i),e[i]=t)}if(n)for(i=a;o>i&&(0!==e[i]||(e.splice(i,1),i--,r--,0!==r));i++);}function c(e,t){e.replace(L,"=").replace(V,function(e){var n=e.split("="),r=n[1]||"",o=n[0].toLowerCase();2===n.length&&0===r.indexOf("??")&&(r=r.replace(x,a).slice(1,-1).replace(j,"&").replace(N,'"')),t[o]=r})}function u(e){return String(e).replace(D,"").trim()}var p=avalon.makeHashCode,v=n(4),f=v.VText,d=v.VComment,h=/^<([^\s>\/=.$<]+)(?:\s+[^=\s]+(?:=[^>\s]+)?)*\s*>(?:[\s\S]*)<\/\1>/,m=/^<([^\s>\/=.$<]+)\s*([^>]*?)\/?>/,g=/^[^<]+/,y=/^<!--([\w\W]*?)-->/,b=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g,x=/\?\?\d+/g,w=/\d+/g,_=/^\s+$/,A=/^(ms|a)-for\:/,k=/^(ms|a)-for-end\:/,E=/^\s+/,C=avalon.config.rbind,T={},O=1,M="(?:\\s+[^>=]*?(?:=[^>]+?)?)*>",$={},S=/./g,j=/&amp;/g,V=/\S+/g,N=/&quot;/g,L=/\s*=\s*/g,D=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi;e.exports=o},function(e,t,n){var r=n(2);e.exports=new r(512)},function(e,t){function n(e,t,n){var c=[],u="ms-skip"in e||"a-skip"in e,p="";for(var v in e){var f,d=e[v];if(!u&&d&&(f=v.match(l))){var h=f[1],m=f[2]||"",g=v;if(s[h]){var y=parseFloat(m)||0;m=h,h="on"}if(g="a-"+h+(m?"-"+m:""),v!==g&&(delete e[v],e[g]=d),i[h]){var b={
type:h,param:m,name:g,expr:d,priority:i[h].priority||100*h.charCodeAt(0)};"on"===h&&(b.name+="-"+y,b.priority+=100*m.charCodeAt(0)+y),c.push(b)}}else p+=a.test(v)?"vnode"+t+".props["+o(v)+"] = "+o(d)+"\n":"vnode"+t+".props."+v+" = "+o(d)+"\n"}return c.length?(avalon.parseExpr(b),c.sort(r).forEach(function(e){p+=i[e.type].parse(e,t,n)})):p+="vnode"+t+".skipAttrs = true\n",p}function r(e,t){return e.priority-t.priority}var a=/[W-]/,o=avalon.quote,i=avalon.directives,l=/^(?:ms|a)-(\w+)-?(.*)/,s=avalon.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit");e.exports=n},function(e,t,n){function r(e,t){function n(e){var t="??"+y++;return b[t]=e,t}function r(e){return b[e]}var h={};t=t||"other","object"==typeof e&&(t=e.type,h=e,e=h.expr);var m=e.trim(),g=o.get(t+":"+m);if(g)return g;var y=1,b={};m=m.replace(i,n).replace(l,n).replace(v,n).replace(d,"$1").split(f);var x=m.shift().replace(s,r).trim();if("on"===t&&p.test(x)&&(x+="($event)"),x=x.replace(u,"$1__vmodel__."),"js"===t)return o.put(t+":"+m,x);var w=m.map(function(e){e=e.replace(s,r).replace(u,"$1__vmodel__.");var t=!1;return e=e.replace(c,function(e,n){return t=!0,/\S/.test(n)?"(__value__,"+n+");":"(__value__);"}),t||(e+="(__value__);"),e=e.replace(/(\w+)/,'avalon.__read__("$1")'),"__value__ = "+e}),_=[];if("on"===t)w=w.map(function(e){return e.replace(/__value__/g,"$event")}),w.length&&w.push("if($event.$return){\n	return;\n}"),_=["function self($event){","try{","	var __vmodel__ = this;","	"+x,"}catch(e){","	avalon.log(e, "+a(e,t)+")","}","}"],w.unshift(2,0);else{if("duplex"===t){var A=["function (__vmodel__){","try{","return "+x+"\n","}catch(e){","	avalon.log(e, "+a(e,t)+")","}","}"];fn=Function("return "+A.join("\n"))(),o.put("duplex:getter"+e.trim(),fn);var k=["function (__vmodel__,__value__){","try{","	"+x+" = __value__","}catch(e){","	avalon.log(e, "+a(e,t)+")","}","}"];fn=Function("return "+k.join("\n"))(),o.put("duplex:setter:"+e.trim(),fn);var E=["function (__vmodel__, __value__){","try{",w.join("\n"),"return __value__\n","}catch(e){","	avalon.log(e, "+a(e,t)+")","}","}"];return fn=Function("return "+E.join("\n"))(),void o.put("duplex:format:"+e.trim(),fn)}_=["(function(){","try{","var __value__ = "+x,"return __value__","}catch(e){","	avalon.log(e, "+a(e,t)+")",'	return ""',"}","})()"],w.unshift(3,0)}return _.splice.apply(_,w),g=_.join("\n"),o.put(t+":"+m,g),g}function a(e,t){return avalon.quote("parse "+t+" binding【 "+e+" 】fail")}var o=n(37),i=/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,l=/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/g,s=/\?\?\d+/g,c=/\(([^)]*)\)/,u=/(^|[^\w\u00c0-\uFFFF_])(@)(?=\w)/g,p=/^\@[$\w]+$/,v=/\|\|/g,f=/\|(?=\w)/,d=/\s*(\.|\|)\s*/g;e.exports=avalon.parseExpr=r},function(e,t){function n(e){for(var t,n,a=[],o=0;;){if(n=e.indexOf(avalon.config.openTag,o),-1===n)break;if(t=e.slice(o,n),0===o&&(t=t.replace(/^\s+/,"")),t&&a.push({expr:t}),o=n+avalon.config.openTag.length,n=e.indexOf(avalon.config.closeTag,o),-1===n)break;t=e.slice(o,n),t&&a.push({expr:t.replace(r,""),type:"{{}}"}),o=n+avalon.config.closeTag.length}return t=e.slice(o),t.replace(/\s+$/,"")&&a.push({expr:t.replace(/\s+$/,"")}),a}var r=/\r?\n/g;e.exports=n},function(e,t,n){function r(e,t){return"(function(){\n\n"+e+"\n\nreturn nodes"+t+"\n})();\n"}function a(e,t){t=t||String(new Date-0).slice(0,5);for(var n=[],p=!1,v="nodes"+t,f="vnode"+t,d="var "+v+" = []\n",h=0;h<e.length;h++){var m=e[h];if("#text"===m.type){d+="var "+f+' = {type:"#text", skipContent:true}\n';var g=s.test(m.nodeValue);if(g){var y=i(m.nodeValue,!1);if(1===y.length)var b=o(y[0].expr);else b=y.map(function(e){return e.type?"String("+o(e.expr)+")":c(e.expr)}).join(" + ");d+=f+".nodeValue = String("+b+")\n",d+=f+".skipContent = false\n"}else d+=f+".nodeValue = "+c(m.nodeValue)+"\n";d+=v+".push("+f+")\n"}else{if("#comment"===m.type){var x=m.nodeValue;if(0===x.indexOf("a-for:")){var w=m.signature;n.push(w),d+=v+'.push({\n	type:"#comment",\n	directive:"for",\n	skipContent:false,\n	signature:'+c(w)+",\n	nodeValue:"+c(x)+"\n})\n",d+=avalon.directives["for"].parse(x,t)}else if(0===x.indexOf("a-for-end:")){var w=n[n.length-1];if(d+=v+'.push({\n	type:"#comment",\n	skipContent:true,\n	nodeValue:'+c(w)+",\n	key:traceKey\n})\n",d+="\n})\n",n.length){var w=n[n.length-1];d+=v+'.push({\n	type:"#comment",\n	skipContent:true,\n	signature:'+c(w)+",\n	nodeValue:"+c(w+":end")+",\n})\n",n.pop()}}else d+=0===x.indexOf("a-js:")?o(x.replace("a-js:",""),"js")+"\n":v+".push("+c(m)+");;;;\n";continue}var p=m.props["a-if"]||m.props["ms-if"];p&&(m.props["a-if"]=p,m.signature=u("a-if"),delete m.props["ms-if"],d+="if(!("+o(p,"if")+")){\n",d+=v+'.push({\n	type: "#comment",\n	directive: "if",\n	nodeValue:'+c(m.signature)+",\n\n	signature:"+c(m.signature)+',\n\n	props: {"a-if":true} })\n',d+="\n}else{\n\n"),d+="var "+f+" = {\n	type: "+c(m.type)+",\n	props: {},\n	children: [],\n	isVoidTag: "+!!m.isVoidTag+',\n	template: ""}\n';var _=l(m.props,t,m);if(_&&(d+=_),!m.isVoidTag&&m.children.length){var A=m.props["a-widget"]||m.props["ms-widget"];A&&(d+="if(!"+f+".props.wid){\n"),d+="	"+f+".children = "+r(a(m.children,t),t)+"\n",A&&(d+="}\n",A=!1)}else d+=f+".template= "+c(m.template)+"\n";d+=v+".push("+f+")\n",p&&(d+="}\n",p=!1)}}return d}var o=n(39),i=n(40),l=n(38),s=avalon.config.rexpr,c=avalon.quote,u=avalon.makeHashCode;e.exports=a},function(e,t){function n(e){if("string"==typeof e)this.type="#comment",this.nodeValue=e,this.skipContent=!0;else for(var t in e)this[t]=e[t]}n.prototype={constructor:n,clone:function(){return new n(this)},toDOM:function(){return document.createComment(this.nodeValue)},toHTML:function(){return"<!--"+this.nodeValue+"-->"}},e.exports=n},function(e,t){function n(e){for(var t in e)this[t]=e[t];var n=this.__type__=this.type;this.type="#component";var r=avalon.components[n];r&&r.init&&arguments.length&&r.init.apply(this,arguments)}n.prototype={toDOM:function(){var e=avalon.components[this.__type__];if(e&&e.toDOM)return e.toDOM.call(this);for(var t=document.createDocumentFragment(),n=0;n<this.children.length;n++)t.appendChild(this.children[n].toDOM());return t},toHTML:function(){var e=avalon.components[this.__type__];if(e&&e.toHTML)return e.toHTML.call(this);for(var t="",n=0;n<this.children.length;n++)t+=this.children[n].toHTML();return t}},e.exports=n},function(e,t){function n(e,t,n){if("object"==typeof e)for(var r in e)this[r]=e[r];else this.type=e,this.props=t,this.children=n,this.template=""}function r(e){return e!==!1&&"function"!=typeof e}n.prototype={constructor:n,toDOM:function(){var e=document.createElement(this.type);for(var t in this.props){var n=this.props[t];r(n)&&e.setAttribute(t,n+"")}if(this.skipContent)switch(this.type){case"script":e.text=this.template;break;case"style":case"template":e.innerHTML=this.template;break;case"noscript":e.textContent=this.template;break;default:var a=avalon.parseHTML(this.template);e.appendChild(a)}else this.isVoidTag||(this.children.length?this.children.forEach(function(t){e.appendChild(avalon.vdomAdaptor(t).toDOM())}):window.Range?e.innerHTML=this.template:e.appendChild(avalon.parseHTML(this.template)));return e},toHTML:function(){var e=[];for(var t in this.props){var n=this.props[t];r(n)&&e.push(t+"="+avalon.quote(this.props[t]+""))}e=e.length?" "+e.join(" "):"";var a="<"+this.type+e;return this.isVoidTag?a+"/>":(a+=">",a+=this.children.length?this.children.map(function(e){return avalon.vdomAdaptor(e).toHTML()}).join(""):this.template,a+"</"+this.type+">")}},e.exports=n},function(e,t){function n(e){if("string"==typeof e)this.type="#text",this.nodeValue=e,this.skipContent=!r.test(e);else for(var t in e)this[t]=e[t]}var r=avalon.config.rexpr;n.prototype={constructor:n,toDOM:function(){return document.createTextNode(this.nodeValue)},toHTML:function(){return this.nodeValue}},e.exports=n},function(e,t,n){function r(e,t){t.__vmodel__=e;var n=p.hideProperty;n(e,"$events",t),n(e,"$watch",function(){if(2===arguments.length)return c.apply(e,arguments);throw"$watch方法参数不对"}),n(e,"$fire",function(t,n,r){var a=e.$events[t];u(a,e,t,n,r)})}function a(e,t,n){return"$"===e.charAt(0)||n[e]||"function"==typeof t||t&&t.nodeName&&t.nodeType>0}function o(e,t,n,r){if(Array.isArray(e))return p.arrayFactory(e,t,n,r);if(avalon.isPlainObject(e)){if(Object(t)===t){var a=p.slaveFactory(t,e,n,r);for(var o in e)v[o]||(a[o]=e[o]);return a}return a=p.masterFactory(e,n,r)}return e}function i(e,t,n){function r(){return a}var a=NaN;return r.heirloom=n,{get:r,set:function(o){if(a!==o){o&&"object"==typeof o&&(o=p.modelAdaptor(o,a,n,{pathname:t,id:e}));var i=a;a=o;var l=n.__vmodel__;if(this.$hashcode&&l){if(l&&n!==l.$events&&(r.heirloom=l.$events),u(r.heirloom[t],l,t,o,i),e.indexOf(".*.")>0){var s=e.match(f),c=avalon.vmodels[s[1]];if(c){var v=s[2];u(c.$events[v],l,v,o,i)}}var d=l.$id.split(".")[0];avalon.rerenderStart=new Date,avalon.batch(d,!0)}}},enumerable:!0,configurable:!0}}function l(e){var t=e.$id;!t&&avalon.config.debug&&avalon.warn("vm.$id must be specified");var n=p.masterFactory(e,{},{pathname:"",id:t,master:!0});if(avalon.vmodels[t])throw Error("error:[",t,"] had defined!");return avalon.vmodels[t]=n}var s=n(34),c=s.$watch,u=s.$emit,p={},v=n(5);p.modelAdaptor=o;var f=/([^.]+)\.(.+)/,d={set:function(e,t){if(e>>>0===e&&this[e]!==t){if(e>this.length)throw Error(e+"set方法的第一个参数不能大于原数组长度");this.notify("*",t,this[e],!0),this.splice(e,1,t)}},contains:function(e){return-1!==this.indexOf(e)},ensure:function(e){return this.contains(e)||this.push(e),this},pushArray:function(e){return this.push.apply(this,e)},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){return e>>>0===e?this.splice(e,1):[]},clear:function(){return this.removeAll(),this}};avalon.define=l,e.exports={$$midway:p,$$skipArray:v,__array__:d,isSkip:a,makeFire:r,makeAccessor:i,modelAdaptor:o}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){function n(e){var t=e.nodeName;return t.toLowerCase()===t&&e.scopeName&&""===e.outerText}e.exports=n},function(e,t){var n=!0;try{Object.defineProperty({},"_",{value:"x"})}catch(r){n=!1}e.exports=n},function(e,t,n){var r=n(61);avalon.directive("attr",{parse:function(e,t){return"vnode"+t+'.props["a-attr"] = '+avalon.parseExpr(e)+";\n"},diff:function(e,t){var n=e.props["a-attr"],r=t.props["a-attr"];if(n&&"object"==typeof n){if(Array.isArray(n)&&(n=e.props["a-attr"]=avalon.mix.apply({},n)),"object"!=typeof r)e.changeAttr=n;else{var a={},o=!1;for(var i in n)n[i]!==r[i]&&(o=!0,a[i]=n[i]);o&&(e.changeAttr=a)}if(e.changeAttr){var l=e.change||(e.change=[]);avalon.Array.ensure(l,this.update)}}else e.props["a-attr"]=t.props["a-attr"]},update:r})},,function(e,t,n){n(50),n(8),n(7),n(11),n(16),n(13),n(17),n(6),n(15),n(53),n(14),n(12),n(60)},function(e,t,n){var r=avalon.msie,a=avalon.quote,o=n(10),i=n(57),l=n(54),s=/\|\s*change\b/,c=/^(?:checkbox|radio)$/,u=/^(file|button|reset|submit|checkbox|radio|range)$/;avalon.directive("duplex",{priority:2e3,parse:function(e,t,n){var r=e.expr,o=n.props.type,i=e.param,l="checked"===i,p=n.ctrl={parsers:[],formatters:[],modelValue:NaN,viewValue:NaN,type:"input",expr:r,parse:function(e){for(var t,n=0;t=this.parsers[n++];)e=t.call(this,e);return e}};l&&(c.test(o)?(p.isChecked=!0,p.type="radio"):i=null);var v=avalon.parsers[i];return v&&p.parsers.push(v),s.test(r)&&(r=r.replace(s,""),u.test(o)?avalon.warn(o+"不支持change过滤器"):p.isChanged=!0),/input|textarea|select/.test(o)?p.type&&(p.type="select"===o?"select":"checkbox"===o?"checkbox":"radio"===o?"radio":"input"):"contenteditable"in n.props&&(p.type="contenteditable"),avalon.parseExpr(p,"duplex"),"vnode"+t+".duplexVm = __vmodel__;\nvnode"+t+'.props["a-duplex"] = '+a(p.expr)+";\n"},diff:function(e,t){t.ctrl&&t.ctrl.set?e.ctrl=t.ctrl:("select"===!e.type&&e.children.length&&avalon.Array.merge(e.children,avalon.lexer(e.template)),l(e,t));var n=e.ctrl;delete e.duplexVm;var r=e.props.value=n.get(n.vmodel);if(n.elem){var a=t.props.value;o=Array.isArray(r)?r+""==a+"":r===a}else var o=!1;if(!o){n.modelValue=r;var i=e.afterChange||(e.afterChange=[]);avalon.Array.ensure(i,this.update)}},update:function(e,t){var n=e.__duplex__=t.ctrl;if(!n.elem){n.elem=e;var a=n.events;for(var l in a)avalon.bind(e,l,a[l]),delete a[l]}if(!r&&o===!1&&!e.valueHijack){e.valueHijack=n.update;var s=setInterval(function(){avalon.contains(avalon.root,e)?e.valueHijack():clearInterval(s)},30)}var c=n.modelValue;if(!n.isChecked)for(var u=n.formatters,p=u.length;p--;)c=u[p](c);n.viewValue!==c&&(n.viewValue=c,i[n.type].call(n),e.caret&&n.updateCaret(e,n.caretPos,n.caretPos))}})},function(e,t,n){(function(e){function t(e,t){var n=e.ctrl=t.ctrl;n.update=r,n.updateCaret=v,n.get=evaluatorPool.get("duplex:"+n.expr),n.set=evaluatorPool.get("duplex:set:"+n.expr);var p=evaluatorPool.get("duplex:format:"+n.expr);n.formatters.push(p);var h=n.events={};switch(n.type){case"radio":"radio"===e.type?h.click=r:h[9>f?"click":"change"]=r;break;case"checkbox":case"select":h.change=r;break;case"contenteditable":n.isChanged?h.blur=r:avalon.modern?("MutationEvent"in window&&(h.DOMCharacterDataModified=r),("webkitHidden"in d||window.webkitURL||window.chrome)&&(h.webkitEditableContentChanged=r),h.input=r):(h.keydown=u,h.paste=o,h.cut=o,h.focus=c,h.blur=s);break;case"input":n.isChanged?h.change=r:avalon.msie<10?(h.propertychange=a,8===f&&(h.keyup=r,h.keydown=r),f>=8&&(e.valueHijack=r,h.dragend=o)):(h.input=r,h.keydown=u,h.paste=o,h.cut=o,h.DOMAutoComplete=r,h.compositionstart=s,h.compositionend=c)}/password|text/.test(n.props.type)&&(h.focus=i,h.blur=l)}function r(){var e=this,t=this.__duplex__;if(!e.composing&&e.value!==t.viewValue){if(e.caret)try{var n=p(e);n.start===n.end&&(t.caretPos=n.start)}catch(r){avalon.warn("fixCaret error",r)}h[t.type].call(t)}}function a(e){"value"===e.propertyName&&r.call(this,e)}function o(e){var t=this;setTimeout(function(){r.call(t,e)},17)}function i(){this.caret=!0}function l(){this.caret=!1}function s(){this.composing=!0}function c(e){this.composing=!1}function u(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||o.call(this,e)}function p(e){var t=NaN,n=NaN;if(e.setSelectionRange)t=e.selectionStart,n=e.selectionEnd;else if(d.selection&&d.selection.createRange){var r=d.selection.createRange();t=0-r.duplicate().moveStart("character",-1e5),n=t+r.text.length}return{start:t,end:n}}function v(e,t,n){if(e.value&&!e.readOnly)if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.select()}else e.selectionStart=t,e.selectionEnd=n}var f=avalon.msie,d=avalon.document,h=n(9),m=n(1).getLongID;m(i),m(l),m(s),m(c),m(r),m(a),m(o),m(u),f>=8&&10>f&&avalon.bind(d,"selectionchange",function(e){var t=d.activeElement||{};!t.caret&&t.valueHijack&&t.valueHijack()}),e["export"]=t}).call(t,n(47)(e))},,,function(e,t){var n={input:function(){this.elem.value=this.viewValue},radio:function(){var e;e=this.isChecked?!!this.viewValue:this.viewValue+""===this.elem.value;var t=this.elem;6===msie?setTimeout(function(){t.defaultChecked=e,t.checked=e},31):t.checked=e},checkbox:function(){for(var e=!1,t=this.elem,n=t.value,r=0;r<this.modelValue.length;r++){var a=this.modelValue[r];a+""===n&&(e=!0)}t.checked=e},select:function(){avalon(this.elem).val(this.viewValue)},contenteditable:function(){this.elem.innerHTML=this.viewValue}};e.exports=n},,,function(e,t){function n(e){return e.replace("return __value__",function(e){var t="if(Array.isArray(__value__)){\n    __value__ = avalon.mix.apply({},__value__)\n}\n";return t+e})}function r(e,t,n){var r=!0;if(0!==s.length)try{a(t)}catch(o){r=!1}r&&t.vmodel.$fire("$ready",t.type)}function a(e){e.children.forEach(function(e){if("#"!==e.type.charAt(0)){if("a-widget"in e.props)throw"unresolved";a(e)}})}function o(e,t){for(var n,r=0;n=e[r++];)if("#"!==n.type.charAt(0))if("a-slot"===n.type){var a=n.props.name||"";t[a]&&e.splice.apply(e,[r-1,1].concat(t[a]))}else o(n.children,t);return e}function i(e,t){var n={};t.children.forEach(function(e){if("#"!==e.type.charAt(0)){var t=e.props.slot||"";n[t]?n[t].push(e):n[t]=[e]}}),o(e,n)}var l=avalon.makeHashCode;avalon.directive("widget",{parse:function(e,t,r){(r.skipContent||!r.children.length)&&(r.children=createVirtual(r.template));var a=l("w");avalon.caches[a]=r.children;var o="config"+t;return"vnode"+t+".props.wid = '"+a+"'\nvnode"+t+".children = avalon.caches[vnode"+t+".props.wid] \nvar "+o+" = vnode"+t+".props['a-widget'] = "+n(avalon.parseExpr(e),"widget")+";\nif("+o+"){\n	vnode"+t+" = avalon.component(vnode"+t+", __vmodel__)\n}\n"},createVm:function(e,t,n){var r=avalon.mix({},t,n),a={};"$init $ready $dispose".replace(/\S+/g,function(e){"function"==typeof r[e]&&(a[e]=r[e]),delete r[e]});var o=avalon.mediatorFactory(e,r);for(var i in a)o.$watch(i,a[i]);return o},diff:function(e,t){var n=e.props.resolved,r=t.props.resolved;n&&"object"==typeof n||(e.props["a-widget"]=r)},update:function(){},replaceElement:function(e,t,n){var r=avalon.vdomAdaptor(t).toDOM();return e?n.replaceChild(r,e):n.appendChild(r),avalon(r).addClass(t.props.wid),r.children.length&&updateEntity(r.childNodes,t.children,r),!1},replaceContent:function(){},switchContent:function(){}});var s=[],c={},u={0:"replaceElement",1:"replaceContent",2:"switchContent",3:"update",4:"update"};avalon.component=function(e,t){var n="string"==typeof e;if(!n){var a=e.props["a-widget"],o=e.props.wid,p=a.$type;if(/(\:|-)/.test(e.type)&&(p=e.type),p=p.replace(":","-"),c[E])return c[E].$render();var v=avalon.components[p];if(v){delete a.$type;var f=String(v.template).trim(),d=createVirtual(f);i(d,e);var h=avalon.createRender(d),m=v.createVm||avalon.directives.widget.createVm,g=m(t,v.defaults,a);g.$id=a.$id=l(p),avalon.vmodels[g.$id]=g;var y=h(g);if(1!==y.length)throw"组件要用一个元素包起来";if(y=y[0],c[o]=y,y.$render=h,y.props.wid=e.props.wid,!v.update){var b=e.props.wtype||0;v.update=avalon.directives.widget[u[b]]}return y.vmodel=g,y.change=y.change||[],y.change.push(v.update),y.afterChange=y.afterChange||[],y.afterChange.push(r),y}return s.push({name:p,vm:t}),e}var p=e,x=t;avalon.components[p]=x;for(var w,_={},A=0;w=s[A];A++)if(p===w.name){s.splice(A,1),A--;var k=w.vm.$id.split(".")[0];_[k]=!0}for(var E in _)batchUpdateEntity(E,!0)}},function(e,t,n){function r(e,t){var n=t.changeAttr;if(e&&1===e.nodeType&&n){for(var r in n){var s=n[r];if("href"===r||"src"===r){if(e.hasAttribute||(s=String(s).replace(l,"&")),console.log(r,"!!"),e[r]=s,window.chrome&&"EMBED"===e.tagName){var c=e.parentNode,u=document.createComment("ms-src");c.replaceChild(u,e),c.replaceChild(e,u)}}else if(0===r.indexOf("data-"))e.setAttribute(r,s);else{var p=a[r]||r;if("boolean"==typeof e[p]&&(e[p]=!!s),s===!1){e.removeAttribute(p);continue}var v=i.test(e)?!1:document.namespaces&&o(e)?!0:r in e.cloneNode(!1);v?e[p]=s+"":e.setAttribute(r,s)}}delete t.changeAttr}}var a=n(18),o=n(48),i=/^\[object SVG\w*Element\]$/,l=/&amp;/g;e.exports=r},,function(e,t){function n(e){if(!("classList"in e)){e.classList={node:e};for(var t in a)e.classList[t.slice(1)]=a[t]}return e.classList}var r=/\S+/g,a={_toString:function(){var e=this.node,t=e.className,n="string"==typeof t?t:t.baseVal,a=n.match(r);return a?a.join(" "):""},_contains:function(e){return(" "+this+" ").indexOf(" "+e+" ")>-1},_add:function(e){this.contains(e)||this._set(this+" "+e)},_remove:function(e){this._set((" "+this+" ").replace(" "+e+" "," "))},__set:function(e){e=e.trim();var t=this.node;"object"==typeof t.className?t.setAttribute("class",e):t.className=e}};"add,remove".replace(avalon.rword,function(e){avalon.fn[e+"Class"]=function(t){var a=this[0]||{};return t&&"string"==typeof t&&1===a.nodeType&&t.replace(r,function(t){n(a)[e](t)}),this}}),avalon.fn.mix({hasClass:function(e){var t=this[0]||{};return 1===t.nodeType&&n(t).contains(e)},toggleClass:function(e,t){var n="boolean"==typeof t,a=this;return String(e).replace(r,function(e){var r=n?t:!a.hasClass(e);a[r?"addClass":"removeClass"](e)}),this}})},,function(e,t,n){n(79),n(63),n(68),n(66),n(81),n(72),n(70),n(77),e.exports=avalon},function(e,t){function n(e,t){if(e.offsetWidth<=0){if(g.test(l["@:get"](e,"display"))){var r={node:e};for(var a in m)r[a]=e.style[a],e.style[a]=m[a];t.push(r)}var o=e.parentNode;o&&1===o.nodeType&&n(o,t)}}function r(e){return e.window&&e.document?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var a=avalon.root,o=avalon.window,i=avalon.camelize,l=avalon.cssHooks,s=["","-webkit-","-o-","-moz-","-ms-"],c={"float":o.Range?"cssFloat":"styleFloat"};if(avalon.cssNumber=avalon.oneObject("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(e,t,n){if(c[e])return c[e];t=t||a.style;for(var r=0,o=s.length;o>r;r++)if(n=i(s[r]+e),n in t)return c[e]=n;return null},avalon.fn.css=function(e,t){if(avalon.isPlainObject(e))for(var n in e)avalon.css(this,n,e[n]);else var r=avalon.css(this,e,t);return void 0!==r?r:this},avalon.fn.position=function(){var e,t,n=this[0],r={top:0,left:0};return n?("fixed"===this.css("position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),"HTML"!==e[0].tagName&&(r=e.offset()),r.top+=avalon.css(e[0],"borderTopWidth",!0),r.left+=avalon.css(e[0],"borderLeftWidth",!0),r.top-=e.scrollTop(),r.left-=e.scrollLeft()),{top:t.top-r.top-avalon.css(n,"marginTop",!0),left:t.left-r.left-avalon.css(n,"marginLeft",!0)}):r},avalon.fn.offsetParent=function(){for(var e=this[0].offsetParent;e&&"static"===avalon.css(e,"position");)e=e.offsetParent;return avalon(e||a)},l["@:set"]=function(e,t,n){try{e.style[t]=n}catch(r){}},o.getComputedStyle)l["@:get"]=function(e,t){if(!e||!e.style)throw new Error("getComputedStyle要求传入一个节点 "+e);var n,r=getComputedStyle(e,null);return r&&(n="filter"===t?r.getPropertyValue(t):r[t],""===n&&(n=e.style[t])),n},l["opacity:get"]=function(e){var t=l["@:get"](e,"opacity");return""===t?"1":t};else{var u=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,p=/^(top|right|bottom|left)$/,v=/alpha\([^)]*\)/i,f=!!o.XDomainRequest,d="DXImageTransform.Microsoft.Alpha",h={thin:f?"1px":"2px",medium:f?"3px":"4px",thick:f?"5px":"6px"};l["@:get"]=function(e,t){var n=e.currentStyle,r=n[t];if(u.test(r)&&!p.test(r)){var a=e.style,o=a.left,i=e.runtimeStyle.left;e.runtimeStyle.left=n.left,a.left="fontSize"===t?"1em":r||0,r=a.pixelLeft+"px",a.left=o,e.runtimeStyle.left=i}return"medium"===r&&(t=t.replace("Width","Style"),"none"===n[t]&&(r="0px")),""===r?"auto":h[r]||r},l["opacity:set"]=function(e,t,n){var r=e.style,a=isFinite(n)&&1>=n?"alpha(opacity="+100*n+")":"",o=r.filter||"";r.zoom=1,r.filter=(v.test(o)?o.replace(v,a):o+" "+a).trim(),r.filter||r.removeAttribute("filter")},l["opacity:get"]=function(e){var t=e.filters.alpha||e.filters[d],n=t&&t.enabled?t.opacity:100;return n/100+""}}"top,left".replace(avalon.rword,function(e){l[e+":get"]=function(t){var n=l["@:get"](t,e);return/px$/.test(n)?n:avalon(t).position()[e]+"px"}});var m={position:"absolute",visibility:"hidden",display:"block"},g=/^(none|table(?!-c[ea]).+)/;avalon.each({Width:"width",Height:"height"},function(e,t){var r="client"+e,a="scroll"+e,o="offset"+e;l[t+":get"]=function(t,n,r){var a=-4;"number"==typeof r&&(a=r),n="Width"===e?["Left","Right"]:["Top","Bottom"];var i=t[o];return 2===a?i+avalon.css(t,"margin"+n[0],!0)+avalon.css(t,"margin"+n[1],!0):(0>a&&(i=i-avalon.css(t,"border"+n[0]+"Width",!0)-avalon.css(t,"border"+n[1]+"Width",!0)),-4===a&&(i=i-avalon.css(t,"padding"+n[0],!0)-avalon.css(t,"padding"+n[1],!0)),i)},l[t+"&get"]=function(e){var r=[];n(e,r);for(var a,o=l[t+":get"](e),i=0;a=r[i++];){e=a.node;for(var s in a)"string"==typeof a[s]&&(e.style[s]=a[s])}return o},avalon.fn[t]=function(n){var i=this[0];if(0===arguments.length){if(i.setTimeout)return i["inner"+e]||i.document.documentElement[r]||i.document.body[r];if(9===i.nodeType){var s=i.documentElement;return Math.max(i.body[a],s[a],i.body[o],s[o],s[r])}return l[t+"&get"](i)}return this.css(t,n)},avalon.fn["inner"+e]=function(){return l[t+":get"](this[0],void 0,-2)},avalon.fn["outer"+e]=function(e){return l[t+":get"](this[0],void 0,e===!0?2:0)}}),avalon.fn.offset=function(){var e=this[0],t={left:0,top:0};if(!e||!e.tagName||!e.ownerDocument)return t;var n=e.ownerDocument,r=n.body,a=n.documentElement,o=n.defaultView||n.parentWindow;if(!avalon.contains(a,e))return t;e.getBoundingClientRect&&(t=e.getBoundingClientRect());var i=a.clientTop||r.clientTop,l=a.clientLeft||r.clientLeft,s=Math.max(o.pageYOffset||0,a.scrollTop,r.scrollTop),c=Math.max(o.pageXOffset||0,a.scrollLeft,r.scrollLeft);return{top:t.top+s-i,left:t.left+c-l}},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){avalon.fn[e]=function(n){var o=this[0]||{},i=r(o),l="scrollTop"===e;return arguments.length?void(i?i.scrollTo(l?avalon(i).scrollLeft():n,l?n:avalon(i).scrollTop()):o[e]=n):i?t in i?i[t]:a[e]:o[e]}})},,function(e,t){function n(e){try{if("object"==typeof e)return e;e="true"===e?!0:"false"===e?!1:"null"===e?null:+e+""===e?+e:r.test(e)?avalon.parseJSON(e):e}catch(t){}return e}var r=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,a=/^[\],:{}\s]*$/,o=/(?:^|:|,)(?:\s*\[)+/g,i=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,l=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=avalon.window.JSON?JSON.parse:function(e){if("string"==typeof e){if(e=e.trim(),e&&a.test(e.replace(i,"@").replace(l,"]").replace(o,"")))return new Function("return "+e)();avalon.error("Invalid JSON: "+e)}return e},avalon.fn.attr=function(e,t){return 2===arguments.length?(this[0].setAttribute(e,t),this):this[0].getAttribute(e)},avalon.fn.data=function(e,t){switch(e="data-"+avalon.hyphen(e||""),arguments.length){case 2:return this.attr(e,t),this;case 1:var r=this.attr(e);return n(r);case 0:var a={};return avalon.each(this[0].attributes,function(t,r){r&&(e=r.name,e.indexOf("data-")||(e=avalon.camelize(e.slice(5)),a[e]=n(r.value)))}),a}}},,function(e,t,n){function r(e,t,n){var a=e.getAttribute("avalon-events");if(a&&(e.disabled!==!0||"click"!==t)){for(var o,i,l=[],s=a.match(d)||[],c=0;i=s[c++];){var u=i.split(":");if(u[0]===t)l.push(u[1]),o=!0;else if(o)break}l.length&&n.push({elem:e,uuids:l})}e=e.parentNode,e&&e.getAttribute&&v[t]&&r(e,t,n)}function a(e){e=new i(e);var t=e.type,n=e.target,a=[];r(n,t,a);for(var o,l,s,c=0;(s=a[c++])&&!e.cancelBubble;)for(e.currentTarget=s.elem,o=0;(l=s.uuids[o++])&&!e.isImmediatePropagationStopped;){var u=avalon.eventListeners[l];if(u){var p=n.__av_context__;if(p&&p.$hashcode===!1)return avalon.unbind(n,t,u);if(/move|scroll/.test(t)){var v=+new Date;v-h>16&&(u.call(p||n,e),h=v)}else u.call(p||n,e)}}}function o(e){var t=c.getAttribute("delegate-events")||"";if(-1===t.indexOf(e)){var n=t.match(d)||[];n.push(e),c.setAttribute("delegate-events",n.join("??")),m(c,e,a)}}function i(e){if(e.originalEvent)return this;for(var t in e)b.test(t)||"function"==typeof e[t]||(this[t]=e[t]);this.target||(this.target=e.srcElement);var n=this.target;if(0===e.type.indexOf("key"))this.which=null!=e.charCode?e.charCode:e.keyCode;else if(y.test(e.type)&&!("pageX"in this)){var r=n.ownerDocument||l,a="BackCompat"===r.compatMode?r.body:r.documentElement;this.pageX=e.clientX+(a.scrollLeft>>0)-(a.clientLeft>>0),this.pageY=e.clientY+(a.scrollTop>>0)-(a.clientTop>>0),this.wheelDeltaY=this.wheelDelta,this.wheelDeltaX=0}this.timeStamp=new Date-0,this.originalEvent=e}var l=avalon.document,s=avalon.window,c=avalon.root,u=avalon.modern,p=n(1).getShortID,v=n(19);u||(delete v.change,delete v.select);var f=avalon.eventHooks;avalon.bind=function(e,t,n){if(1===e.nodeType){var r=e.getAttribute("avalon-events")||"",i=p(n),l=t+":"+i,s=f[t];s&&(t=s.type,s.fix&&(n=s.fix(e,n),n.uuid=i+"0"),l=t+":"+n.uuid),avalon.eventListeners[n.uuid]=n,-1===r.indexOf(t+":")&&(v[t]?o(t):m(e,t,a));var c=r.split("??");""===c[0]&&c.shift(),-1===c.indexOf(l)&&(c.push(l),e.setAttribute("avalon-events",c.join("??")))}else m(e,t,n);return n},avalon.unbind=function(e,t,n){if(1===e.nodeType){var r=e.getAttribute("avalon-events")||"";switch(arguments.length){case 1:g(e,t,a),e.removeAttribute("avalon-events");break;case 2:r=r.split("??").filter(function(e){return-1===e.indexOf(t+":")}).join("??"),e.setAttribute("avalon-events",r);break;case 3:var o=t+":"+n.uuid;r=r.split("??").filter(function(e){return e!==o}).join("??"),e.setAttribute("avalon-events",r),delete avalon.eventListeners[n.uuid]}}else g(e,t,n)};var d=/[^\s\?]+/g,h=+new Date,m=u?function(e,t,n){e.addEventListener(t,n)}:function(e,t,n){e.attachEvent("on"+t,n)},g=u?function(e,t,n){e.removeEventListener(t,n)}:function(e,t,n){e.detachEvent("on"+t,n)};avalon.fireDom=function(e,t,n){if(l.createEvent){var r=l.createEvent("Events");r.initEvent(t,!0,!0,n),avalon.mix(r,n),e.dispatchEvent(r)}else c.contains(e)&&(r=l.createEventObject(),avalon.mix(r,n),e.fireEvent("on"+t,r))};var y=/^(?:mouse|contextmenu|drag)|click/,b=/^(?:ms|webkit|moz)/;if(i.prototype={preventDefault:function(){var e=this.originalEvent;this.returnValue=!1,e&&(e.returnValue=!1,e.preventDefault&&e.preventDefault())},stopPropagation:function(){var e=this.originalEvent;this.cancelBubble=!0,e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=!0,e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},"onmouseenter"in c||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){f[e]={type:t,fix:function(t,n){return function(r){var a=r.relatedTarget;return a&&(a===t||16&t.compareDocumentPosition(a))?void 0:(delete r.type,r.type=e,n.apply(t,arguments))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(e,t){s[e]&&!f.animationend&&(f.animationend={type:t})}),"oninput"in l.createElement("input")||(f.input={type:"propertychange",fix:function(e,t){return function(n){return"value"===n.propertyName?(n.type="input",t.apply(e,arguments)):void 0}}}),void 0===l.onmousewheel){var x=void 0!==l.onwheel?"wheel":"DOMMouseScroll",w="wheel"===x?"deltaY":"detail";f.mousewheel={type:x,fix:function(e,t){return function(n){return n.wheelDeltaY=n.wheelDelta=n[w]>0?-120:120,n.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(n,"type",{value:"mousewheel"}),t.apply(e,arguments)}}}}avalon.fn.bind=function(e,t,n){return this[0]?avalon.bind(this[0],e,t,n):void 0},avalon.fn.unbind=function(e,t,n){return this[0]&&avalon.unbind(this[0],e,t,n),this}},,function(e,t,n){var r=n(2),a=n(20),o=n(74),i=n(73),l={area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],col:[2,"<table><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table>","</table>"],td:[3,"<table><tr>","</tr></table>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:avalon.modern?[0,"",""]:[1,"X<div>","</div>"]};l.th=l.td,l.optgroup=l.option,l.tbody=l.tfoot=l.colgroup=l.caption=l.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(avalon.rword,function(e){l[e]=l.g});var s=/<([\w:]+)/,c=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,u=avalon.modern?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,p=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,v=/<|&#?\w+;/,f=new r(128);avalon.parseHTML=function(e){var t,n=avalon.avalonFragment.cloneNode(!1);if("string"!=typeof e)return n;if(!v.test(e))return n.appendChild(document.createTextNode(e)),n;e=e.replace(c,"<$1></$2>").trim();var r=f.get(e);if(r)return i(r);var u=(s.exec(e)||["",""])[1].toLowerCase(),p=l[u]||l._default,d=avalon.avalonDiv;d.innerHTML=p[1]+e+p[2],a(d),avalon.modern||o(d,p,u);for(var h=p[0];h--;d=d.lastChild);for(;t=d.firstChild;)n.appendChild(t);return r.put(e,i(n)),n},avalon.innerHTML=function(e,t){if(!avalon.modern&&!u.test(t)&&!p.test(t))try{return void(e.innerHTML=t);
}catch(n){}var r=this.parseHTML(t);this.clearHTML(e).appendChild(r)},avalon.clearHTML=function(e){for(e.textContent="";e.lastChild;)e.removeChild(e.lastChild);return e}},function(e,t){function n(e,t){if(1===e.nodeType){var n=e.nodeName.toLowerCase();"object"===n?e.parentNode&&(e.outerHTML=t.outerHTML):"input"===n&&o.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function r(e){return e.getElementsByTagName?e.getElementsByTagName("*"):e.querySelectorAll("*")}function a(e){var t=e.cloneNode(!0);if(avalon.modern)return t;var a=r(t),o=r(e);return avalon.each(o,function(e){n(a[e],o[e])}),t}var o=/radio|checkbox/;e.exports=a},function(e,t,n){function r(e,t,n){var r="X<div>"===t[1]?e.lastChild.firstChild:e.lastChild;if(r&&"TABLE"===r.tagName&&"tbody"!==n)for(var i,l=r.childNodes,s=0;i=l[s++];)if("TBODY"===i.tagName&&!i.innerHTML){r.removeChild(i);break}for(l=e.all,s=0;i=l[s++];)o(i)&&a(i)}function a(e){"url(#default#VML)"!==e.currentStyle.behavior&&(e.style.behavior="url(#default#VML)",e.style.display="inline-block",e.style.zoom=1)}var o=n(48);e.exports=r},,,function(e,t,n){function r(){try{s.doScroll("left"),u()}catch(e){setTimeout(r)}}var a,o=n(21),i=avalon.document,l=avalon.window,s=avalon.root,c=[],u=function(e){for(a=!0;e=c.shift();)e(avalon)};if("complete"===i.readyState)setTimeout(u);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",u);else if(i.attachEvent){i.attachEvent("onreadystatechange",function(){"complete"===i.readyState&&u()});try{var p=null===l.frameElement}catch(v){}s.doScroll&&p&&l.external&&r()}l.document&&avalon.bind(l,"load",u),avalon.ready=function(e){a?e(avalon):c.push(e)},avalon.ready(function(){o(i.body)})},,function(e,t){function n(e,t){try{for(;t=t.parentNode;)if(t===e)return!0;return!1}catch(n){return!1}}function r(){return(new XMLSerializer).serializeToString(this)}function a(e,t){if(e&&e.childNodes)for(var n,r=e.childNodes,i=0;n=r[i++];)if(1===n.nodeType){var l=document.createElementNS(o,n.nodeName.toLowerCase());avalon.each(n.attributes,function(e,t){l.setAttribute(t.name,t.value)}),a(n,l),t.appendChild(l)}else t.appendChild(n.cloneNode(!0))}if(avalon.contains=n,avalon.document.contains||(avalon.document.contains=function(e){return n(document,e)}),avalon.window.SVGElement){document.createTextNode("x").contains||(Node.prototype.contains=function(e){return!!(16&this.compareDocumentPosition(e))});var o="http://www.w3.org/2000/svg",i=avalon.document.createElementNS(o,"svg");i.innerHTML='<circle fill="red" />',/^\[object SVG\w*Element\]$/.test(i.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:r,set:function(e){var t=this.tagName.toLowerCase(),n=this.parent,r=avalon.parseHTML(e);if("svg"===t)n.insertBefore(r,this);else{var o=document.createDocumentFragment();a(r,o),n.insertBefore(o,this)}n.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var e=this.outerHTML,t=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),n=new RegExp("</"+this.nodeName+">$","i");return e.replace(t,"").replace(n,"")},set:function(e){if(avalon.clearHTML){avalon.clearHTML(this);var t=avalon.parseHTML(e);a(t,this)}}}})}!avalon.root.outerHTML&&window.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",r)},,function(e,t){function n(e){var t=e.tagName.toLowerCase();return"input"===t&&/checkbox|radio/.test(e.type)?"checked":t}var r=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,a={"option:get":avalon.msie?function(e){return r.test(e.outerHTML)?e.value:e.text.trim()}:function(e){return e.value},"select:get":function(e,t){for(var n,r=e.options,o=e.selectedIndex,i=a["option:get"],l="select-one"===e.type||0>o,s=l?null:[],c=l?o+1:r.length,u=0>o?c:l?o:0;c>u;u++)if(n=r[u],(n.selected||u===o)&&!n.disabled&&(!n.parentNode.disabled||"OPTGROUP"!==n.parentNode.tagName)){if(t=i(n),l)return t;s.push(t)}return s},"select:set":function(e,t,n){t=[].concat(t);for(var r,o=a["option:get"],i=0;r=e.options[i++];)(r.selected=t.indexOf(o(r))>-1)&&(n=!0);n||(e.selectedIndex=-1)}};avalon.fn.val=function(e){var t=this[0];if(t&&1===t.nodeType){var r=0===arguments.length,o=r?":get":":set",i=a[n(t)+o];if(i)var l=i(t,e);else{if(r)return(t.value||"").replace(/\r/g,"");t.value=e}}return r?l:this}},,function(e,t,n){n(85);var r=n(31),a=n(29);r.mix(r,a),n(84),n(1),n(30),e.exports=r},function(e,t){function n(e){return o.test(a.call(e))}function r(e){if(!e)return!1;var t=e.length;if(t===t>>>0){var n=a.call(e).slice(8,-1);if(l.test(n))return!1;if("Array"===n)return!0;try{return{}.propertyIsEnumerable.call(e,"length")===!1?v.test(e.item||e.callee):!0}catch(r){return!e.window}}return!1}var a=avalon.inspect,o=/^\[object (?:Window|DOMWindow|global)\]$/,i=/\[native code\]/,l=/(Array|List|Collection|Map|Arguments)\]$/,s=avalon.ohasOwn,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u="undefined"!=typeof JSON?JSON.stringify:function(e){return'"'+e.replace(/[\\\'\x00-\x1f]/g,function(e){var t=c[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'};avalon.quote=u;var p={};"Boolean Number String Function Array Date RegExp Object Error".replace(avalon.rword,function(e){p["[object "+e+"]"]=e.toLowerCase()}),avalon.type=function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?p[a.call(e)]||"object":typeof e};var v=/^\s*\bfunction\b/;avalon.isFunction="object"==typeof alert?function(e){try{return v.test(e+"")}catch(t){return!1}}:function(e){return"[object Function]"===a.call(e)},avalon.isWindow=function(e){return e?e==e.document&&e.document!=e:!1},n(avalon.window)&&(avalon.isWindow=n);var f,d;for(f in avalon({}))break;d="0"!==f,avalon.isPlainObject=function(e,t){if(!e||"object"!==avalon.type(e)||e.nodeType||avalon.isWindow(e))return!1;try{if(e.constructor&&!s.call(e,"constructor")&&!s.call(e.constructor.prototype||{},"isPrototypeOf"))return!1}catch(n){return!1}if(d)for(t in e)return s.call(e,t);for(t in e);return void 0===t||s.call(e,t)},i.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(e){return"[object Object]"===a.call(e)&&Object.getPrototypeOf(e)===Object.prototype});var h=[].slice;avalon.slice=function(e,t,n){if(e&&!Array.isArray(e)){for(var r=[],a=0,o=e.length;o>a;a++)r[a]=e[a];e=r}return h.call(e,t,n)},avalon.mix=avalon.fn.mix=function(){var e,t,n,r,a,o,i=arguments[0]||{},l=1,s=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[1]||{},l++),"object"==typeof i||avalon.isFunction(i)||(i={}),l===s&&(i=this,l--);s>l;l++)if(null!=(e=arguments[l]))for(t in e){try{n=i[t],r=e[t]}catch(u){continue}i!==r&&(c&&r&&(avalon.isPlainObject(r)||(a=Array.isArray(r)))?(a?(a=!1,o=n&&Array.isArray(n)?n:[]):o=n&&avalon.isPlainObject(n)?n:{},i[t]=avalon.mix(c,o,r)):void 0!==r&&(i[t]=r))}return i},avalon.each=function(e,t){if(e){var n=0;if(r(e))for(var a=e.length;a>n&&t(n,e[n])!==!1;n++);else for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)break}},e.exports={avalon:avalon,isArrayLike:r}},function(e,t){function n(e,t,n){var r="for(var "+e+"i=0,n = this.length; i < n; i++){"+t.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+n;return Function("fn,scope",r)}var r=Object.prototype.hasOwnProperty;if(!"司徒正美".trim){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}var o=!{toString:null}.propertyIsEnumerable("toString"),i=function(){}.propertyIsEnumerable("prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=l.length;Object.keys||(Object.keys=function(e){var t=[],n=i&&"function"==typeof e;if("string"==typeof e||e&&e.callee)for(var a=0;a<e.length;++a)t.push(String(a));else for(var c in e)n&&"prototype"===c||!r.call(e,c)||t.push(String(c));if(o)for(var u=e.constructor,p=u&&u.prototype===e,v=0;s>v;v++){var f=l[v];p&&"constructor"===f||!r.call(e,f)||t.push(f)}return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===String.prototype.toString.call(e)}),Array.isArray.bind||(Function.prototype.bind=function(e){if(arguments.length<2&&void 0===e)return this;var t=this,n=arguments;return function(){var r,a=[];for(r=1;r<n.length;r++)a.push(n[r]);for(r=0;r<arguments.length;r++)a.push(arguments[r]);return t.apply(e,a)}});var c=Array.prototype;if(!/\[native code\]/.test(c.map)){var u={indexOf:function(e,t){var n=this.length,r=~~t;for(0>r&&(r+=n);n>r;r++)if(this[r]===e)return r;return-1},lastIndexOf:function(e,t){var n=this.length,r=null==t?n-1:t;for(0>r&&(r=Math.max(0,n+r));r>=0;r--)if(this[r]===e)return r;return-1},forEach:n("","_",""),filter:n("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:n("r=[],","r[i]=_","return r"),some:n("","if(_)return true","return false"),every:n("","if(!_)return false","return true")};for(var p in u)c[p]=u[p]}e.exports={}},,,function(e,t,n){function r(){}function a(e,t,n){var a={};e.$skipArray&&(a=avalon.oneObject(e.$skipArray),delete e.$skipArray);var o={};n=n||{};var i={},l=b("$"),s=n.pathname||"";n.id=n.id||l,n.hashcode=l;var c,u,v;for(c in e)if(!d[c]){var f=o[c]=e[c];p(c,f,a)||(u=n.id+"."+c,v=s?s+"."+c:c,i[c]=h(u,v,t))}i.$model=g;var y=new r;y=x(y,i,e);for(c in o)y[c]=o[c],c in a?delete o[c]:o[c]=!0;return m(y,t,o,i,n),y}function o(e,t,n,a){var o,i,l,s={},c={},u={},v=a.pathname,f=e.$accessors||{};for(o in t)d[o]||(s[o]=!0,p(o,t[o],{})?c[o]=t[o]:f[o]?u[o]=f[o]:(i=a.id+"."+o,l=v?v+"."+o:o,u[o]=h(i,l,n)));a=e.hashcode||b("$"),u.$model=g;var y=new r;y=x(y,u,c);for(o in c)y[o]=c[o],delete t[o];return m(y,a,n,s,u),y}function i(e,t,n){var a,o=e.$accessors||{},i=t.$accessors||{},l={},s={};for(a in e)s[a]=e[a],o[a]&&(l[a]=o[a]);for(a in t)s[a]=t[a],i[a]&&(l[a]=i[a]);var c=new r;c=x(c,l,s);for(a in s)l[a]||(c[a]=s[a]),a in d?delete s[a]:s[a]=!0;return m(c,n||{},s,l,{id:e.$id,hashcode:b("$"),master:!0}),c}function l(e,t,n,r){if(t&&t.splice){var a=[0,t.length].concat(e);return t.splice.apply(t,a),t}for(var o in w)e[o]=w[o];e.notify=function(e,t,a,o){var i=n.__vmodel__;if(i){var l=null===e||void 0===e?r.pathname:r.pathname+"."+e;i.$fire(l,t,a),o||(avalon.rerenderStart=new Date,avalon.batch(i.$id,!0))}};var i=b("$");r.array=!0,r.hashcode=i,r.id=r.id||i,m(e,r,n);for(var l={id:e.$id+".*",master:!0},s=0,u=e.length;u>s;s++)e[s]=c(e[s],{},l);return e}function s(e,t){e.length!==t&&e.notify("length",e.length,t,!0)}function c(e,t,n){return Object(e)===e?y(e,0,t,n):e}var u=n(91),p=u.isSkip,v=u.toJson,f=u.$$midway,d=u.$$skipArray,h=u.makeAccessor,m=u.makeObserver,g=u.modelAccessor,y=u.modelAdaptor,b=avalon.makeHashCode,x=n(90);f.masterFactory=a,f.slaveFactory=o,f.mediatorFactory=avalon.mediatorFactory=i;var w=u.__array__;f.arrayFactory=l;var _=Array.prototype,A=_.splice;w.removeAll=function(e){var t=this.length;if(Array.isArray(e))for(var n=this.length-1;n>=0;n--)-1!==e.indexOf(this[n])&&A.call(this,n,1);else if("function"==typeof e)for(n=this.length-1;n>=0;n--){var r=this[n];e(r,n)&&A.call(this,n,1)}else A.call(this,0,this.length);avalon.modern||(this.$model=v(this)),s(this,t),this.notify()};var k=["push","pop","shift","unshift","splice"];k.forEach(function(e){var t=_[e];w[e]=function(n,r){var a=[],o=this.length,i={idname:this.$id+".*",master:!0};if("splice"===e&&Object(this[0])===this[0])for(var l=this.slice(n,r),u=_.slice.call(arguments,2),a=[n,r],p=0,f=u.length;f>p;p++){var d=l[p];a[p+2]=y(u[p],d,d&&d.$events,i)}else for(var h=0,m=arguments.length;m>h;h++)a[h]=c(arguments[h],{},i);var g=t.apply(this,a);return avalon.modern||(this.$model=v(this)),s(this,o),this.notify(),g}}),"sort,reverse".replace(avalon.rword,function(e){w[e]=function(){return _[e].apply(this,arguments),avalon.modern||(this.$model=v(this)),this.notify(),this}}),e.exports=avalon},,function(e,t,n){function r(e,t,n,r){var a=t[n];return 4!==arguments.length?a.get.call(e):void a.set.call(e,r)}var a=n(49),o=n(5),i=Object.defineProperties,l=Object.defineProperty,s=new Date-0;if(!a&&("__defineGetter__"in avalon&&(l=function(e,t,n){return"value"in n&&(e[t]=n.value),"get"in n&&e.__defineGetter__(t,n.get),"set"in n&&e.__defineSetter__(t,n.set),e},i=function(e,t){for(var n in t)t.hasOwnProperty(n)&&l(e,n,t[n]);return e}),avalon.msie)){var c={};window.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function"].join("\n"),"VBScript"),i=function(e,t,n){var a=[];a.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d"+s+", p"+s+")","		Set [__data__] = d"+s+": set [__proxy__] = p"+s,"		Set [__const__] = Me","	End Function");var i={};for(e in t)i[e]=!0,a.push("	Public Property Let ["+e+"](val"+s+")","		Call [__proxy__](Me,[__data__], '"+e+"', val"+s+")","	End Property","	Public Property Set ["+e+"](val"+s+")","		Call [__proxy__](Me,[__data__], '"+e+"', val"+s+")","	End Property","	Public Property Get ["+e+"]","	On Error Resume Next","		Set["+e+"] = [__proxy__](Me,[__data__],'"+e+"')","	If Err.Number <> 0 Then","		["+e+"] = [__proxy__](Me,[__data__],'"+e+"')","	End If","	On Error Goto 0","	End Property");for(e in n)i[e]!==!0&&(i[e]=!0,a.push("	Public ["+e+"]"));for(e in o)i[e]!==!0&&(i[e]=!0,a.push("	Public ["+e+"]"));a.push("	Public [hasOwnProperty]"),a.push("End Class");var l=a.join("\r\n"),u=c[l];u||(u=avalon.makeHashCode("VBClass"),window.parseVB("Class "+u+l),window.parseVB(["Function "+u+"Factory(a, b)","	Dim o","	Set o = (New "+u+")(a, b)","	Set "+u+"Factory = o","End Function"].join("\r\n")),c[l]=u);var p=window[u+"Factory"](t,r);return p}}e.exports=i},function(e,t,n){function r(e){var t=avalon.type(e);if("array"===t){for(var n=[],a=0;a<e.length;a++)n[a]=r(e[a]);return n}if("object"===t){var o={};for(a in e)if(e.hasOwnProperty(a)){var i=e[a];o[a]=i&&i.nodeType?i:r(i)}return o}return e}function a(e,t,n){l?Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!1,configurable:!0}):e[t]=n}function o(e,t,n,o,i){function l(e){return n[e]===!0}i.array?avalon.modern?a(e,"$model",c):e.$model=r(e):(a(e,"$accessors",o),a(e,"hasOwnProperty",l)),a(e,"$id",i.id),a(e,"$hashcode",i.hashcode),i.master===!0&&(a(e,"$element",null),a(e,"$render",avalon.noop),s(e,t))}var i=n(46),l=n(49),s=i.makeFire,c={get:function(){return r(this)},set:avalon.noop,enumerable:!1,configurable:!0};i.$$midway.hideProperty=a;var u={toJson:r,makeObserver:o,modelAccessor:c};for(var p in i)u[p]=i[p];e.exports=u}])});