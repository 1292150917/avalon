<!DOCTYPE html>
<html>
    <head>
        <title>ms-with</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="avalon.js"></script>
        <style>
            .red{
                color:red;
            }
            .green{
                color:greenyellow;
            }
            .aaa{
                color:green;
            }
        </style>
        <script >
            /*     var model = avalon.define("xxx", function(vm) {
             vm.obj = {
             a: 1,
             b: true,
             c: 3,
             d: 4
             }
             });
             model.obj.$watch("b", function(a) {
             avalon.log(a + "=====================")
             })
             setTimeout(function() {
             model.obj = {
             k: "xxx",
             d: 3,
             e: "yyy",
             b: false,
             f: "zz"
             }
             setTimeout(function() {
             console.log(model.obj)
             })
             
             }, 2000)
             
             
             
             
             setTimeout(function() {
             model.obj.k = "xxxxxxx"
             model.obj.b = true
             }, 4000)
             */
            var model = avalon.define("yyy", function(vm) {
                vm.items = {
                    aaa: 1,
                    bbb: 2,
                    ccc: {
                        a: 1,
                        b: 1,
                        c: 1
                    }
                }
            })
            setTimeout(function() {
                console.log("==================")
                model.items = {
                    kkk: -1,
                    fff: 0,
                    ccc: {
                        a: 4,
                        b: 3,
                        d: 6666666
                    },
                    eee: 3,
                    bbb: 4
                }
            }, 2000)
        </script>

    </head>
    <body >
        <div ms-controller="xxx">
            <h3 style="text-align: center">ms-with</h3>
            <div ms-with="obj">
                <p>{{$key}} -- {{$val}}</p>
            </div>
            <div ms-class-red="obj.b" ms-class-green="!obj.b">这个会变色</div>
        </div>
        <div ms-controller="yyy">

            <div  ms-with="items">
                <p>{{$key}}-------------------{{$val}}</p>
                <ul ms-with="$val">
                    <li>{{$key}}  {{$val}}</li>
                </ul>
            </div>

        </div>

        <pre style="display:none">
   var yyy = avalon.define('yyy', function(vm) {
                vm.items = {
                  
                    b: {aaaa: 'aaaa', bbbb: "bbbb", cccc: "ccccc"},
                    z: {},
                    9: {},
                    f:{ee:'opret'}
                }
            });

            setTimeout(function() {
                console.log("777777777777777777777777777777777777777")
                yyy.items = {b: {aaaa: "999", "cccc": "pppp", bbbb: "8888", dddd:"iiiii"},a:"ppp"};



            }, 1000);
        </pre>
    </body>
</html>
