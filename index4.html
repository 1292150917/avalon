<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title></title>
<!--        <script src="http://www.xiu8.com/assets/js/utils/1.0.1/jquery/1.11.1/jquery-1.11.1.js"
        type="text/javascript"></script>-->
        <script src="avalon.js" type="text/javascript"></script>
        <script type="text/javascript">
            var id = 0
            var test = avalon.define("test", function(vm) {
                vm.arr = [];
                vm.init = function() {
                   id = setInterval(function() {
                        vm.arr.push("<li><img src='http://image.cache.xiu8.com/avatar/70/70/999358.jpg' style='width: 20px'>" + (new Date()).getTime() + "</li>");
                        if (vm.arr.length > 10) {
                            vm.arr.shift();
                        }
                    }, 500);
                };
                vm.stop = function(){
                    clearInterval(id)
                    console.log(avalon.test)
                }
            });
            avalon.ready(function() {
                test.init();

            });
            //        var DOM = null,num= 0,_arr=[];
            //        function Destroy() {
            //            if (navigator.appName == "Microsoft Internet Explorer") {
            //                // setTimeout(function(){
            //                CollectGarbage();
            //                // }, 100);
            //            }
            //        };
            //        $(function(){
            //            DOM = $("#userList");
            //
            //            setInterval(function(){
            //                _arr.push("<li><img src='http://image.cache.xiu8.com/avatar/70/70/999358.jpg'>"+(new Date()).getTime()+"</li>");
            //                if(_arr.length > 10){
            //                    _arr.shift();
            //                }
            //                DOM.html(_arr.join(""));
            //
            //            },500);
            //        });
        </script>
    </head>
    <body>
        <div ms-controller="test">
            <button ms-click="stop" type="button">click</button>
            <ul id="userList" >
                <li ms-repeat="arr">{{el|html}}</li>
            </ul>
        </div>
    </body>
</html>